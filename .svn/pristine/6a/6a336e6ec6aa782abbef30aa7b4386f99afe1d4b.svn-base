{"remainingRequest":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\thread-loader\\dist\\cjs.js!c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\babel-loader\\lib\\index.js!c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\eslint-loader\\index.js??ref--13-0!c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\src\\components\\Home\\Homenav\\script.js?vue&type=script&lang=js&","dependencies":[{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\src\\components\\Home\\Homenav\\script.js","mtime":1578887731069},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import qs from 'qs';\nimport transfer from '@/components/Home/transfer.js';\nexport default {\n  data: function data() {\n    return {\n      commission: \"\",\n      //代办事项\n      // 单位参数\n      companydata: [],\n      // 标记是否全选\n      checkedall: true,\n      // allunits:\"\",//单位数量\n      officeCount: \"\",\n      //直属单位数量\n      orgCount: \"\" //内设机构数量\n\n    };\n  },\n  mounted: function mounted() {\n    var objs = {\n      userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n      officeId: \"\"\n    };\n    this.init(objs);\n    var allnum = {\n      officeId: \"\"\n    };\n    this.allunitsfun(allnum);\n  },\n  methods: {\n    // 选择单位\n    selunit: function selunit(item) {\n      var that = this;\n      var idsarr = item.id;\n      this.companydata.map(function (list) {\n        list.checkedstate = false;\n      });\n      item.checkedstate = true; // transfer.$emit('unitids',idsarr)\n\n      var allnum = {\n        officeId: idsarr\n      };\n      this.allunitsfun(allnum);\n    },\n    // 全选单位\n    allcompanychecked: function allcompanychecked() {\n      if (this.checkedall) {\n        this.companydata.map(function (item) {\n          item.checkedstate = false;\n        });\n      } else {\n        this.companydata.map(function (item) {\n          item.checkedstate = true;\n        });\n      }\n\n      var idsarr = [];\n      this.companydata.map(function (list) {\n        if (list.checkedstate) {\n          idsarr.push(list.id);\n        }\n      }); // transfer.$emit('allunitids',idsarr.join())\n\n      var allnum = {\n        officeId: \"\"\n      };\n      this.allunitsfun(allnum);\n    },\n    //首页跳转链接\n    handleGolink: function handleGolink(e) {\n      this.$router.push({\n        path: e\n      });\n    },\n    //页面初始化\n    init: function init(objs) {\n      var that = this;\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + 'web/index',\n        data: objs,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          var objlist = res.data.body;\n          that.commission = objlist.totalBacklog;\n          var officeList = objlist.officeList;\n          officeList.map(function (list) {\n            list.checkedstate = true;\n          });\n          that.companydata = officeList;\n        }\n      });\n    },\n    //获取单位数量\n    allunitsfun: function allunitsfun(obj) {\n      var that = this;\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + 'web/index/getChildOfficeNumber',\n        data: obj,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          // that.allunits = res.data.body.number\n          that.officeCount = res.data.body.officeCount;\n          that.orgCount = res.data.body.orgCount;\n        }\n      });\n    }\n  },\n  watch: {\n    companydata: {\n      handler: function handler(newVal, oldVal) {\n        var _this = this;\n\n        this.checkedall = true;\n        this.companydata.map(function (item) {\n          if (!item.checkedstate) {\n            _this.checkedall = false;\n          }\n        });\n      },\n      deep: true\n    }\n  }\n};",null]}