{"remainingRequest":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\我的项目\\纪检项目\\byqc\\src\\views\\StandBookEnter\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\我的项目\\纪检项目\\byqc\\src\\views\\StandBookEnter\\index.vue","mtime":1579067950522},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nfunction f(arr, selectedKey) {\r\n  return arr.filter(item => item.value !== selectedKey).map(item => {\r\n    item = Object.assign({}, item)\r\n    if (item.children) {\r\n      item.children = f(item.children, selectedKey)\r\n    }\r\n    return item\r\n  })\r\n}\r\nimport Breadcrumb from \"../../components/Breadcrumb\";\r\nimport qs from 'qs'\r\nexport default {\r\n  name: \"StandBookEnter\",\r\n  // props: {},\r\n  data() {\r\n    return {\r\n      loading:true,\r\n      itemid: \"\",\r\n      step:0,//进度步骤\r\n      showinput:false,//工作单位查看时显示\r\n      disabled:false,\r\n      idshow: false,\r\n      show: false,//保存\r\n      updata: false,//更新进度\r\n      nextsave: false,//下一步弹窗里的保存\r\n      personnelpops:false,//保存弹框显示切换\r\n      personnelpops1:false,//查找弹框显示切换\r\n      disponsalWay: \"\",//处置方式（为判断走到哪一步，不需要显示）\r\n      unitslist: [],//级联选择\r\n      sourcelist: [],//线索来源\r\n      proposedDispositionList: [],//拟处置方式\r\n      violationOfPartyDisciplineList: [],//党六大纪律\r\n      transferredResultList: [],//办理结果\r\n      accountabilityMeansList: [],//问责方式\r\n      sexlist:[],//性别数组\r\n      educationBackgroundList: [],//文化程度数组\r\n      politicallist:[],//政治面貌数组\r\n      marriagelist:[],//婚姻数组\r\n      dutyRankList:[],//职务级别\r\n      workingStateList: [],//在职情况\r\n      isnoList: [],//是否\r\n      tableHeight: \"53vh\",\r\n      templateSelection: '',\r\n      tableData: [\r\n        // {\r\n          // name:\"\",//姓名\r\n          // tableoffice:\"\",//单位\r\n          // tablepost:\"\",//岗位\r\n          \r\n          {\r\n            'id': 1,\r\n            'title': '嘿嘿嘿',\r\n            'priority': '高',\r\n            'state': 1,\r\n            'dealingPeople': '小龙女'\r\n          },\r\n          {\r\n            'id': 2,\r\n            'title': 'hengheng',\r\n            'priority': '高',\r\n            'state': 1,\r\n            'dealingPeople': '小龙女'\r\n          },\r\n          {\r\n              'id': 3,\r\n              'title': '嘿嘿嘿',\r\n              'priority': '高',\r\n              'state': 1,\r\n              'dealingPeople': '小龙女'\r\n            },\r\n            {\r\n              'id': 4,\r\n              'title': 'hengheng',\r\n              'priority': '高',\r\n              'state': 1,\r\n              'dealingPeople': '小龙女'\r\n            },\r\n            {\r\n              'id': 5,\r\n              'title': '嘿嘿嘿',\r\n              'priority': '高',\r\n              'state': 1,\r\n              'dealingPeople': '小龙女'\r\n            },\r\n            {\r\n              'id': 6,\r\n              'title': 'hengheng',\r\n              'priority': '高',\r\n              'state': 1,\r\n              'dealingPeople': '小龙女'\r\n            },\r\n            {\r\n              'id': 7,\r\n              'title': '嘿嘿嘿',\r\n              'priority': '高',\r\n              'state': 1,\r\n              'dealingPeople': '小龙女'\r\n            },\r\n            {\r\n              'id': 8,\r\n              'title': 'hengheng',\r\n              'priority': '高',\r\n              'state': 1,\r\n              'dealingPeople': '小龙女'\r\n            },\r\n      ],\r\n\r\n      //备注\r\n      remarksform:{\r\n        remark1:\"\",\r\n        remark2:\"\",\r\n      },\r\n      //办理情况\r\n      Todealwithsituation:{\r\n        istransferred:\"\",//是否办结\r\n        transferredResult:\"\",//办理结果\r\n        transferredTime:\"\",//办结时间\r\n        accountabilityMeans:\"\",//问责方式\r\n        isHoldDemocraticMeetings:\"\",//是否召开民主生活会\r\n        holdDemocraticMeetingsTime:\"\",//召开民主生活会时间\r\n        execute:\"\",//处分是否执行到位\r\n        isArchive:\"\",//是否归档\r\n        isPunishmentExecution:\"\",\r\n        accountabilityFor: \"\",//问责事由\r\n      },\r\n      //违纪违法内容\r\n      dacform:{\r\n        violationOfPartyDiscipline:\"\",//六大纪律\r\n        isDeregulation:\"\",//八项规定\r\n        isFourWindsProblem:\"\",//四风问题\r\n        corruption:\"\",//腐败\r\n        isEighteenthAfter:\"\",//十八大问题\r\n        isPovertyAlleviationProblem:\"\",//扶贫\r\n        isAntitriadPutting:\"\",//涉黑\r\n        isCorruptionLivelihoodSector: \"\",//是否民生领域腐败\r\n      },\r\n      // 线索信息表单\r\n      msgform:{\r\n        clueStoTheSource:\"\",//线索来源\r\n        letterNumber:\"\",//来件编号\r\n        groupNumber:\"\",//组内线索编号\r\n        isDuplicateOrNot:\"\",//是否重复件\r\n        clueNumber:\"\",//线索件数\r\n        content:\"\",//反映的主要问题\r\n      },\r\n      //被反应人信息\r\n      byfind:{\r\n        personnelid:\"\",//被反映人id\r\n        personnelName:\"\",//姓名\r\n        idCard:\"\",//身份证\r\n        sex: \"\",//性别\r\n        birthday:\"\",//出生年月\r\n        maritalStatus:\"\",//婚姻状况\r\n        nativePlace:\"\",//籍贯\r\n        educationBackground:\"\",//文化程度\r\n        politicsStatus:\"\",//政治面貌\r\n        officeName:\"\",//工作单位\r\n        phone:\"\",//联系方式\r\n        nation:\"\",//民族\r\n        workingState:\"\",//在职情况\r\n        presentOccupation:\"\",//职务\r\n        jobLevel:\"\",//职级\r\n        isCommunistPartyMember:\"\",//市委\r\n        isCityCommissionPartyMembericipal:\"\",//市纪委\r\n        isCPPCCMemberOrNot:\"\",//是否政协委员\r\n        isNPCDEputiesOrNot:\"\",//是否人大代表\r\n        isPartyRepresentativeOrNot:\"\",//是否党代表\r\n        personalResume:\"\",//工作简历\r\n      },\r\n      //反应人信息\r\n      find:{\r\n        reflectName:\"\",//姓名\r\n        reflectPhone:\"\",//联系方式\r\n        reflectunitname:\"\",//工作单位\r\n        reflectunitid:\"\",\r\n        reflectPresenToCcupation:\"\",//职务\r\n      },\r\n      // 处置\r\n      disposition:[],\r\n      //处置理由\r\n      form: {\r\n        disposalOfReason: \"\",//处置理由\r\n        proposedDisposition: \"\",//拟处置方式\r\n        thereWillBeTime: \"\",//上会时间\r\n        savedispose:\"\", //保存时候传的处置方式\r\n      },\r\n      rules:{\r\n        clueStoTheSource:[{required: true, message: '请选择线索来源', trigger: 'blur'}],\r\n        groupNumber:[{required: true, message: '请填写组内线索编号', trigger: 'blur'}],\r\n        clueNumber:[{required: true, message: '请填写线索件数', trigger: 'blur'}],\r\n        isDuplicateOrNot:[{required: true, message: '请选择是否重复件', trigger: 'blur'}],\r\n      },\r\n    };\r\n  },\r\n  computed: {},\r\n  created() { \r\n    document.title = \"线索台账录入\";\r\n    let that = this\r\n    //线索来源\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"clue_sto_the_source\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res => {\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.sourcelist = res.data.body.dictValueList;\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    });\r\n    //处置方式\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"disponsal_way\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.proposedDispositionList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n    //党六大纪律\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"violation_of_party_discipline\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.violationOfPartyDisciplineList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n    //办理结果 \r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"transferred_result\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.transferredResultList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n    //问责方式\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"accountability_means\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.accountabilityMeansList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n    //性别\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'sex'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.sexlist = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //文化程度\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'education_background'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.educationBackgroundList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //政治面貌\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'politics_status'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.politicallist = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //婚姻\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'marital_status'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.marriagelist = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //职务级别  title_jobs_level\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'job_level'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.dutyRankList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //在职情况\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'working_state'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.workingStateList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //是否\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"yes_no\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.isnoList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n  },\r\n  mounted() {\r\n    let id = this.$route.query.id\r\n    console.log(this.$route.query.ifupdata)\r\n    if(id){\r\n      this.showinput = true\r\n      this.itemid = id\r\n      let objs = {\r\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n        id: id\r\n      }\r\n      this.show = this.$route.query.ifupdata == 0 ?true :false\r\n      this.updata = this.$route.query.ifupdata ?true :false\r\n      this.ifupdata = this.$route.query.ifupdata\r\n      this.init(objs)\r\n    }else{\r\n      this.nextsave = true\r\n    }\r\n    this.initunits()\r\n  },\r\n  methods: {\r\n    //下标处理\r\n    indexMethod(index){\r\n      return index+1>9?index+1:'0'+(index+1)\r\n    },\r\n    // 表格样式的处理\r\n    cellStyle({ row, column, rowIndex, columnIndex }) {\r\n      //基数偶数延时不同\r\n      if (rowIndex % 2 != 0) {\r\n        return {\r\n          \"background-color\": \"#2162A8\",\r\n          \"text-align\": \"center\",\r\n          color: \"#fff\",\r\n          \"font-weight\": \"normal\",\r\n          padding: \"5px 0\",\r\n          height: \"60px\"\r\n        };\r\n      } else {\r\n        return {\r\n          \"background-color\": \"#02468F\",\r\n          \"text-align\": \"center\",\r\n          color: \"#fff\",\r\n          \"font-weight\": \"normal\",\r\n          padding: \"5px 0\",\r\n          height: \"60px\"\r\n        };\r\n      }\r\n    },\r\n    headerCellStyle({ row, rowIndex }) {\r\n      return {\r\n        \"background-color\": \"#027DBC\",\r\n        \"text-align\": \"center\",\r\n        color: \"#fff\",\r\n        \"font-weight\": \"normal\",\r\n        \"font-size\": \"16px\"\r\n      };\r\n    },\r\n    //初始化\r\n    init(objs){\r\n      let that = this\r\n      this.$ajax({\r\n        method:\"POST\",\r\n        url: that.globals.requesturl + 'web/cluesparameter/form',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.success && res.data.errorCode == '-1'){\r\n          //处置方式判断\r\n          if(res.data.body.disponsalWay == 0){\r\n            that.disponsalWay = 0\r\n            that.isShow = false\r\n            that.step = 0\r\n          }else if(res.data.body.disponsalWay == 0){\r\n            that.disponsalWay = 1\r\n            that.step = 1\r\n            // that.isShow = false\r\n          }else if(res.data.body.disponsalWay == 2 || res.data.body.disponsalWay == 3 || res.data.body.disponsalWay == 4 || res.data.body.disponsalWay == 5 || res.data.body.disponsalWay == 6 || res.data.body.disponsalWay == 7 || res.data.body.disponsalWay == 8 || res.data.body.disponsalWay == 9){\r\n            that.disponsalWay = 2\r\n            that.step = 2\r\n          }else if(res.data.body.disponsalWay == 10){\r\n            that.disponsalWay = 3\r\n            that.step = 3\r\n          }else if(res.data.body.disponsalWay == 11){\r\n            that.disponsalWay == 4\r\n            that.step = 4\r\n            that.isShow = false\r\n          }\r\n          // that.step = that.disponsalWay\r\n          // that.step = res.data.body.disponsalWay\r\n          // console.log(that.step)\r\n          console.log(that.find.reflectunitname)\r\n          //页面渲染\r\n          that.form.savedispose = res.data.body.disponsalWay //保存时候传的处置方式\r\n          // console.log(that.form.savedispose)\r\n          that.msgform.letterNumber = res.data.body.letterNumber\r\n          that.msgform.groupNumber = res.data.body.groupNumber \r\n          that.msgform.clueNumber = res.data.body.clueNumber\r\n          that.msgform.content = res.data.body.content\r\n          that.byfind.personnelid = res.data.body.personnel.id\r\n          that.byfind.personnelName = res.data.body.personnel.name\r\n          that.byfind.idCard = res.data.body.personnel.idCard\r\n          that.byfind.sex = res.data.body.personnel.sex\r\n          that.byfind.birthday = res.data.body.personnel.birthday\r\n          // that.byfind.maritalStatus = res.data.body.personnel.maritalStatus\r\n          that.byfind.nativePlace = res.data.body.personnel.nativePlace\r\n          that.byfind.educationBackground = res.data.body.personnel.educationBackground\r\n          that.byfind.politicsStatus = res.data.body.personnel?res.data.body.personnel.politicsStatus:\"\"\r\n          that.byfind.officeName = res.data.body.personnel&&res.data.body.personnel.office?res.data.body.personnel.office.name:\"\"\r\n          that.byfind.phone = res.data.body.personnel.phone\r\n          that.byfind.nation = res.data.body.personnel.nation\r\n          that.byfind.presentOccupation = res.data.body.personnel.presentOccupation\r\n          that.byfind.jobLevel = res.data.body.personnel.jobLevel\r\n          that.byfind.personalResume = res.data.body.personnel.personalResume\r\n\r\n\r\n          that.find.reflectPresenToCcupation = res.data.body.reflectPresenToCcupation\r\n          that.find.reflectName = res.data.body.reflectName\r\n          that.find.reflectPhone = res.data.body.reflectPhone\r\n          that.find.reflectunitname = res.data.body.reflectunit.name//反映人单位\r\n          that.find.reflectunitid = res.data.body.reflectunit.id//反映人单位id\r\n          that.form.disposalOfReason = res.data.body.disposalOfReason\r\n          that.form.thereWillBeTime = res.data.body.thereWillBeTime\r\n          that.Todealwithsituation.transferredTime = res.data.body.transferredTime\r\n          that.Todealwithsituation.holdDemocraticMeetingsTime = res.data.body.holdDemocraticMeetingsTime \r\n          that.Todealwithsituation.accountabilityFor = res.data.body.accountabilityFor\r\n          that.remarksform.remark1 = res.data.body.remark1\r\n          that.remarksform.remark2 = res.data.body.remark2\r\n          that.msgform.clueStoTheSource = res.data.body.clueStoTheSource\r\n          that.form.proposedDisposition = res.data.body.proposedDisposition\r\n          that.dacform.violationOfPartyDiscipline = res.data.body.violationOfPartyDiscipline != \"\" ? res.data.body.violationOfPartyDiscipline.split(\",\"):[]\r\n          that.Todealwithsituation.transferredResult = res.data.body.transferredResult\r\n          that.Todealwithsituation.accountabilityMeans = res.data.body.accountabilityMeans\r\n          that.byfind.maritalStatus = res.data.body.personnel.maritalStatus\r\n          that.byfind.workingState = res.data.body.personnel.workingState\r\n          that.msgform.isDuplicateOrNot = res.data.body.isDuplicateOrNot\r\n          that.dacform.isDeregulation = res.data.body.isDeregulation\r\n          that.dacform.isFourWindsProblem = res.data.body.isFourWindsProblem\r\n          that.dacform.isEighteenthAfter = res.data.body.isEighteenthAfter\r\n          that.dacform.isPovertyAlleviationProblem = res.data.body.isPovertyAlleviationProblem\r\n          that.dacform.isAntitriadPutting = res.data.body.isAntitriadPutting\r\n          that.dacform.isCorruptionLivelihoodSector = res.data.body.isCorruptionLivelihoodSector\r\n          that.Todealwithsituation.istransferred = res.data.body.istransferred\r\n          that.Todealwithsituation.isHoldDemocraticMeetings = res.data.body.isHoldDemocraticMeetings\r\n          that.Todealwithsituation.isPunishmentExecution = res.data.body.isPunishmentExecution\r\n          that.Todealwithsituation.isArchive = res.data.body.isArchive\r\n          that.byfind.isCommunistPartyMember = res.data.body.personnel.isCommunistPartyMember\r\n          that.byfind.isCityCommissionPartyMember = res.data.body.personnel.isCityCommissionPartyMember\r\n          // ====================== 新增三个是否 ==========================\r\n          that.byfind.isCPPCCMemberOrNot = res.data.body.personnel.isCPPCCMemberOrNot\r\n          that.byfind.isNPCDEputiesOrNot = res.data.body.personnel.isNPCDEputiesOrNot\r\n          that.byfind.isPartyRepresentativeOrNot = res.data.body.personnel.isPartyRepresentativeOrNot\r\n          // ==============================================================\r\n          res.data.body.recordList.map(function(list){\r\n            that.disposition.push(list)\r\n          })\r\n        }else{\r\n          this.$message.error(res.data.msg);\r\n        }\r\n      })\r\n    },\r\n    // 查询单位\r\n    initunits(){\r\n      let that = this; \r\n      let objs = {\r\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n      } \r\n      this.$ajax({\r\n        method: \"POST\",\r\n        url: that.globals.requesturl + 'web/office/list',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.errorCode == \"-1\"){\r\n          let lists = [];\r\n          that.unitslist = res.data.body.officeList.map(function(list,index){\r\n            return {\r\n              id: list.id,\r\n              name: list.name,\r\n              children: []\r\n            }\r\n          })\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    //级联事件\r\n    unitChanges(data) {\r\n      let that = this;\r\n      let objs = {\r\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n        parentId:data[data.length-1]\r\n      } \r\n      this.$ajax({\r\n        method: \"POST\",\r\n        url: that.globals.requesturl + 'web/office/getChildren',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.errorCode == \"-1\"){\r\n          if(data.length == 1){\r\n            that.unitslist.map(function(list,index){\r\n              if(list.id == data[0]){\r\n                if(!list.children.length){\r\n                  list.children = res.data.body.officeList.map(function(list,index){\r\n                    return {\r\n                      id: list.id,\r\n                      name: list.name,\r\n                      children: list.hasChildren==false?\"\":[]\r\n                    }\r\n                  })\r\n                }\r\n              }\r\n            })\r\n          }else if(data.length == 2){\r\n            that.unitslist.map(function(list,index){\r\n              if(list.id == data[0]){\r\n                list.children.map(function(list,index){\r\n                  if(list.id == data[1]){\r\n                    if(!list.children.length){\r\n                      list.children = res.data.body.officeList.map(function(list,index){\r\n                        return {\r\n                          id: list.id,\r\n                          name: list.name,\r\n                          children:list.hasChildren==false?\"\":[]\r\n                        }\r\n                      })\r\n                    }\r\n                  }\r\n                })\r\n              }\r\n            })\r\n          }\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    //保存\r\n    savebtns(){\r\n      this.personnelpops = true\r\n    },\r\n    //保存弹窗确定按钮\r\n    submitchangeunit(formName){\r\n      let that = this\r\n      this.personnelpops = false\r\n      this.$refs[formName].validate((valid) => {\r\n        if(valid){\r\n          let forminfo = {\r\n            id: that.itemid,\r\n            reflectName: that.find.reflectName,\r\n            reflectPresenToCcupation: that.find.reflectPresenToCcupation,\r\n            reflectPhone: that.find.reflectPhone,\r\n            clueStoTheSource: that.msgform.clueStoTheSource,\r\n            letterNumber: that.msgform.letterNumber,\r\n            groupNumber: that.msgform.groupNumber,\r\n            clueNumber: that.msgform.clueNumber,\r\n            content: that.msgform.content,\r\n            proposedDisposition: that.form.proposedDisposition,\r\n            thereWillBeTime: that.form.thereWillBeTime,\r\n            disposalOfReason: that.form.disposalOfReason,\r\n            // disponsalWay: that.disponsalWay,//处置方式\r\n            disponsalWay: that.form.savedispose,//处置方式\r\n            violationOfPartyDiscipline: that.dacform.violationOfPartyDiscipline.length>0?that.dacform.violationOfPartyDiscipline.join(\",\"):\"\",\r\n            isDeregulation: that.dacform.isDeregulation,\r\n            isFourWindsProblem: that.dacform.isFourWindsProblem,\r\n            isDuplicateOrNot: that.msgform.isDuplicateOrNot,\r\n            isEighteenthAfter: that.dacform.isEighteenthAfter,\r\n            isPovertyAlleviationProblem: that.dacform.isPovertyAlleviationProblem,\r\n            isAntitriadPutting: that.dacform.isAntitriadPutting,\r\n            istransferred: that.Todealwithsituation.istransferred,\r\n            transferredResult: that.Todealwithsituation.transferredResult,\r\n            accountabilityMeans: that.Todealwithsituation.accountabilityMeans,\r\n            isHoldDemocraticMeetings: that.Todealwithsituation.isHoldDemocraticMeetings,\r\n            holdDemocraticMeetingsTime: that.Todealwithsituation.holdDemocraticMeetingsTime, //民主生活会召开时间\r\n            transferredTime:that.Todealwithsituation.transferredTime, //办结时间\r\n            thereWillBeTime:that.form.thereWillBeTime,//上会时间\r\n            isPunishmentExecution: that.Todealwithsituation.isPunishmentExecution,\r\n            isCommitteeMember:that.byfind.isCommunistPartyMember, //是否市纪委委员\r\n            remark1: that.remarksform.remark1,\r\n            remark2: that.remarksform.remark2,\r\n            isArchive:that.Todealwithsituation.isArchive,\r\n            accountabilityFor: that.Todealwithsituation.accountabilityFor,\r\n            isCorruptionLivelihoodSector: that.dacform.isCorruptionLivelihoodSector,\r\n            // reflectunitname:that.find.reflectunitname?that.find.reflectunitname:\"\",\r\n            // \"reflectunit.id\": that.find.reflectunitname?that.find.reflectunitname[that.find.reflectunitname.length-1]:'',\r\n            \"reflectunit.id\": typeof(that.find.reflectunitname) == 'string' ? that.find.reflectunitid : that.find.reflectunitname[that.find.reflectunitname.length-1],//反映人单位id\r\n            \"personnel.id\": that.byfind.personnelid,\r\n            userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n            problemClueDisposalRecords: JSON.stringify(that.disposition)\r\n          }\r\n          this.$ajax({\r\n            method: \"POST\",\r\n            url: that.globals.requesturl + 'web/cluesparameter/save',\r\n            data: forminfo,\r\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n            transformRequest: [function (data) { \r\n              return qs.stringify(data)\r\n            }]\r\n          }).then(res=>{\r\n            if(res.data.errorCode == \"-1\"){\r\n              this.$message.success(res.data.msg); \r\n              // this.cluesParameter = res.data.body.id\r\n              this.$router.push({path: '/updateprogress',query: {id: res.data.body.id}})\r\n            }else{\r\n              this.$message.error(res.data.msg); \r\n            }\r\n          })\r\n        }else{\r\n          return false;\r\n        }\r\n      })\r\n    },\r\n    //查找\r\n    getPersonnel(){\r\n      this.personnelpops1 = true\r\n      let that = this\r\n      let objs = {\r\n        name: that.byfind.personnelName,\r\n        idCard: that.byfind.idCard\r\n      }\r\n      this.$ajax({\r\n        method:\"POST\",\r\n        url: that.globals.requesturl + 'web/cluesparameter/getPersonnel',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.success && res.data.errorCode == '-1'){\r\n          console.log(res.data)\r\n          that.byfind.personnelid = res.data.body.id\r\n          that.byfind.personnelName = res.data.body.name\r\n          that.byfind.idCard = res.data.body.idCard\r\n          that.byfind.sex = res.data.body.sex\r\n          that.byfind.birthday = res.data.body.birthday\r\n          that.byfind.maritalStatus = res.data.body.maritalStatus\r\n          that.byfind.nativePlace = res.data.body.nativePlace\r\n          that.byfind.educationBackground = res.data.body.educationBackground\r\n          that.byfind.politicsStatus = res.data.body.politicsStatus\r\n          that.byfind.officeName = res.data.body.officeName\r\n          that.byfind.phone = res.data.body.phone\r\n          that.byfind.nation = res.data.body.nation\r\n          that.byfind.workingState = res.data.body.workingState\r\n          that.byfind.presentOccupation = res.data.body.presentOccupation\r\n          that.byfind.jobLevel = res.data.body.jobLevel\r\n          that.byfind.personalResume = res.data.body.personalResume\r\n          that.byfind.isCityCommissionPartyMember = res.data.body.isCityCommissionPartyMember\r\n          that.byfind.isCPPCCMemberOrNot = res.data.body.isCPPCCMemberOrNot\r\n          that.byfind.isCommunistPartyMember = res.data.body.isCommunistPartyMember\r\n          that.byfind.isNPCDEputiesOrNot = res.data.body.isNPCDEputiesOrNot\r\n          that.byfind.isPartyRepresentativeOrNot = res.data.body.isPartyRepresentativeOrNot\r\n\r\n          \r\n          that.workingStateList.map(function(list){\r\n            if(list.value == res.data.body.workingState){ \r\n              that.byfind.workingState = list.label\r\n            }\r\n          })\r\n          that.isnoList.map(function(list){\r\n            // if(list.value == res.data.body.isCommunistPartyMember){\r\n            //   that.byfind.isCommunistPartyMember = list.label\r\n            // } \r\n            // if(list.value == res.data.body.isCityCommissionPartyMember){\r\n            //   that.byfind.isCityCommissionPartyMember = list.label\r\n            // }\r\n            // 新增三个是否\r\n            // if(list.value == res.data.body.isCPPCCMemberOrNot){\r\n            //   that.byfind.isCPPCCMemberOrNot = list.label\r\n            // }\r\n            // if(list.value == res.data.body.isNPCDEputiesOrNot){\r\n            //   that.Todealwithsituation.isNPCDEputiesOrNot = list.label\r\n            // }\r\n            // if(list.value == res.data.body.isPartyRepresentativeOrNot){\r\n            //   that.byfind.isPartyRepresentativeOrNot = list.label\r\n            // }\r\n          })\r\n\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    singleElection (row) {\r\n      this.templateSelection = this.tableData.indexOf(row);\r\n      this.templateRadio = row.id;\r\n    },\r\n    //跳转更新进度页面\r\n    updateProgress(formName){\r\n      if(!this.$route.query.ifupdata){\r\n        let that = this\r\n        this.personnelpops = false\r\n        this.$refs[formName].validate((valid) => {\r\n          if(valid){\r\n            let forminfo = {\r\n              id: that.itemid,\r\n              reflectName: that.find.reflectName,\r\n              reflectPresenToCcupation: that.find.reflectPresenToCcupation,\r\n              reflectPhone: that.find.reflectPhone,\r\n              clueStoTheSource: that.msgform.clueStoTheSource,\r\n              letterNumber: that.msgform.letterNumber,\r\n              groupNumber: that.msgform.groupNumber,\r\n              clueNumber: that.msgform.clueNumber,\r\n              content: that.msgform.content,\r\n              proposedDisposition: that.form.proposedDisposition,\r\n              thereWillBeTime: that.form.thereWillBeTime,//上会时间\r\n              holdDemocraticMeetingsTime: that.Todealwithsituation.holdDemocraticMeetingsTime, //民主生活会召开时间\r\n              transferredTime:that.Todealwithsituation.transferredTime, //办结时间\r\n              disposalOfReason: that.form.disposalOfReason,\r\n              // disponsalWay: that.disponsalWay,//处置方式\r\n              disponsalWay: that.form.savedispose,//处置方式\r\n              violationOfPartyDiscipline: that.dacform.violationOfPartyDiscipline.length>0?that.dacform.violationOfPartyDiscipline.join(\",\"):\"\",\r\n              isDeregulation: that.dacform.isDeregulation,\r\n              isFourWindsProblem: that.dacform.isFourWindsProblem,\r\n              isDuplicateOrNot: that.msgform.isDuplicateOrNot,\r\n              isEighteenthAfter: that.dacform.isEighteenthAfter,\r\n              isPovertyAlleviationProblem: that.dacform.isPovertyAlleviationProblem,\r\n              isAntitriadPutting: that.dacform.isAntitriadPutting,\r\n              istransferred: that.Todealwithsituation.istransferred,\r\n              transferredResult: that.Todealwithsituation.transferredResult,\r\n              accountabilityMeans: that.Todealwithsituation.accountabilityMeans,\r\n              isHoldDemocraticMeetings: that.Todealwithsituation.isHoldDemocraticMeetings,\r\n              holdDemocraticMeetingsTime: that.Todealwithsituation.holdDemocraticMeetingsTime,\r\n              isPunishmentExecution: that.Todealwithsituation.isPunishmentExecution,\r\n              isCommitteeMember:that.byfind.isCommunistPartyMember, //是否市纪委委员\r\n              remark1: that.remarksform.remark1,\r\n              remark2: that.remarksform.remark2,\r\n              isArchive:that.Todealwithsituation.isArchive,\r\n              accountabilityFor: that.Todealwithsituation.accountabilityFor,\r\n              isCorruptionLivelihoodSector: that.dacform.isCorruptionLivelihoodSector,\r\n              // \"reflectunit.id\": that.find.reflectunitname?that.find.reflectunitname[that.find.reflectunitname.length-1]:'',\r\n              \"reflectunit.id\": typeof(that.find.reflectunitname) == 'string' ? that.find.reflectunitid : that.find.reflectunitname[that.find.reflectunitname.length - 1],//反映人单位id\r\n              \"personnel.id\": that.byfind.personnelid,\r\n              userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n              problemClueDisposalRecords: JSON.stringify(that.disposition)\r\n            }\r\n            this.$ajax({\r\n              method: \"POST\",\r\n              url: that.globals.requesturl + 'web/cluesparameter/save',\r\n              data: forminfo,\r\n              headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n              transformRequest: [function (data) { \r\n                return qs.stringify(data)\r\n              }]\r\n            }).then(res=>{\r\n              if(res.data.errorCode == \"-1\"){\r\n                this.$message.success(res.data.msg); \r\n                let ifupdata = this.$route.query.ifupdata\r\n                this.$router.push({path: '/updateprogress',query: {id:this.itemid,ifupdata:ifupdata}})\r\n              }else{\r\n                this.$message.error(res.data.msg); \r\n              }\r\n            })\r\n          }else{\r\n            return false;\r\n          }\r\n        })\r\n      }else{\r\n        let ifupdata = this.$route.query.ifupdata\r\n        this.$router.push({path: '/updateprogress',query: {id:this.itemid,ifupdata:ifupdata}})\r\n      }\r\n    },\r\n    //返回上一页\r\n    goback() {\r\n      this.$router.go(-1);\r\n    }\r\n  },\r\n  watch: {}\r\n};\r\n",null]}