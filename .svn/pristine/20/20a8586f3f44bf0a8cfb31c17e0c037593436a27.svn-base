{"remainingRequest":"f:\\纪检项目\\monitor\\byqc\\node_modules\\thread-loader\\dist\\cjs.js!f:\\纪检项目\\monitor\\byqc\\node_modules\\babel-loader\\lib\\index.js!f:\\纪检项目\\monitor\\byqc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!f:\\纪检项目\\monitor\\byqc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!f:\\纪检项目\\monitor\\byqc\\src\\views\\updateprogress\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"f:\\纪检项目\\monitor\\byqc\\src\\views\\updateprogress\\index.vue","mtime":1576460715637},{"path":"f:\\纪检项目\\monitor\\byqc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"f:\\纪检项目\\monitor\\byqc\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"f:\\纪检项目\\monitor\\byqc\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"f:\\纪检项目\\monitor\\byqc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"f:\\纪检项目\\monitor\\byqc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"f:\\\\\\u7EAA\\u68C0\\u9879\\u76EE\\\\monitor\\\\byqc\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport qs from \"qs\";\nexport default _defineProperty({\n  name: \"StandBookEnter\",\n  // props: {},\n  data: function data() {\n    return {\n      isdisable: false,\n      id: [],\n      isShow: false,\n      personnelpops: false,\n      //弹框显示切换\n      disponsalWay: \"\",\n      //处置方式\n      fileRecordList: [],\n      //处置方式记录附件列表\n      content: [],\n      contenarr: [],\n      proposedDispositionList: [],\n      pages: 1,\n      step: null,\n      //进度步骤\n      nextspan: 0,\n      textareaobj: {\n        disponsalWay: \"\",\n        textarealist: [{\n          content: \"\",\n          id: \"\",\n          disponsalWay: 2\n        }, {\n          content: \"\",\n          id: \"\",\n          disponsalWay: 3\n        }, {\n          content: \"\",\n          id: \"\",\n          disponsalWay: 4\n        }, {\n          content: \"\",\n          id: \"\",\n          disponsalWay: 5\n        }, {\n          content: \"\",\n          id: \"\",\n          disponsalWay: 6\n        }, {\n          content: \"\",\n          id: \"\",\n          disponsalWay: 7\n        }, {\n          content: \"\",\n          id: \"\",\n          disponsalWay: 8\n        }, {\n          content: \"\",\n          id: \"\",\n          disponsalWay: 9\n        }]\n      }\n    };\n  },\n  computed: {},\n  methods: {},\n  components: {},\n  created: function created() {\n    var _this = this;\n\n    document.title = \"线索台账修改进度\";\n    var that = this; //处置意见\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"disponsal_way\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        _this.proposedDispositionList = res.data.body.dictValueList;\n        console.log(_this.proposedDispositionList);\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    });\n  },\n  mounted: function mounted() {\n    var id = this.$route.query.id;\n    this.init();\n  },\n  watch: {}\n}, \"methods\", {\n  disposeIdeaList: [],\n  //处置方式\n  // 个人中心Tab切换\n  get: function get(e) {\n    // console.log(e);\n    this.pages = e;\n  },\n  leftget: function leftget(dex) {\n    if (this.step == dex) {\n      this.disable = false;\n    } else {\n      this.disable = true;\n    }\n\n    this.step = dex;\n    this.isShow = dex == 2 ? true : false;\n  },\n  init: function init() {\n    var _this2 = this;\n\n    var that = this;\n    var objs = {\n      id: this.$route.query.id,\n      userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd\n    };\n    this.$ajax({\n      method: \"POST\",\n      url: that.globals.requesturl + \"web/cluesparameter/record\",\n      data: objs,\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        if (!res.data.body.disponsalWay) {\n          that.isShow = false;\n          that.step = 0;\n        } else if (res.data.body.disponsalWay == 0) {\n          that.step = 0;\n        } else if (res.data.body.disponsalWay == 1) {\n          that.step = 1;\n        } else if (res.data.body.disponsalWay == 2 || res.data.body.disponsalWay == 3 || res.data.body.disponsalWay == 4 || res.data.body.disponsalWay == 5 || res.data.body.disponsalWay == 6 || res.data.body.disponsalWay == 7 || res.data.body.disponsalWay == 8 || res.data.body.disponsalWay == 9) {\n          that.step = 2;\n          _this2.isShow = true;\n        } else if (res.data.body.disponsalWay == 10) {\n          that.step = 3;\n        } else if (res.data.body.disponsalWay == 11) {\n          that.step = 4;\n        }\n\n        that.disponsalWay = 0; // that.number = that.number+1\n\n        var arrlist = res.data.body.recordList;\n        that.textareaobj.disponsalWay = res.data.body.disponsalWay;\n        that.contenarr = res.data.body.recordList;\n\n        for (var i = 0; i < arrlist.length; i++) {\n          for (var j = 0; j < that.textareaobj.textarealist.length; j++) {\n            if (arrlist[i].disponsalWay == res.data.body.disponsalWay) {\n              that.textareaobj.textarealist[j].content = arrlist[i].content;\n              that.textareaobj.textarealist[j].id = arrlist[i].id;\n            }\n          }\n        }\n\n        console.log(arrlist);\n        var totalList = [];\n        var contents = []; //文本域内容显示\n\n        var idid = [];\n        arrlist.map(function (list) {\n          that.disponsalWay = list.disponsalWay;\n          console.log(list);\n\n          if (list.disponsalWay == 0) {\n            that.disponsalWay = 0;\n            that.isShow = false;\n          } else if (list.disponsalWay == 0) {\n            that.disponsalWay = 1;\n            that.isShow = false;\n          } else if (list.disponsalWay == 2 || list.disponsalWay == 3 || list.disponsalWay == 4 || list.disponsalWay == 5 || list.disponsalWay == 6 || list.disponsalWay == 7 || list.disponsalWay == 8 || list.disponsalWay == 9) {\n            that.disponsalWay = 2;\n            that.isShow = false;\n          } else if (list.disponsalWay == 10) {\n            that.disponsalWay = 3;\n            that.isShow = true;\n          } else if (list.disponsalWay == 11) {\n            that.disponsalWay == 4;\n            that.isShow = false;\n          } else if (list.disponsalWay == \"\") {\n            that.isShow = false;\n          }\n\n          contents.push(list.content);\n          idid.push(list.id);\n          totalList.push(list);\n        });\n        that.content = contents.join(\"\\n\");\n        that.id = idid; // that.step = that.disponsalWay;\n        // console.log(arrlist)\n        //循环拿到fileRecordList下的file 和 time\n\n        var preList = [];\n\n        for (var _i = 0; _i < arrlist.length; _i++) {\n          if (arrlist[_i].fileRecordList != 0) {\n            for (var _j = 0; _j < arrlist[_i].fileRecordList.length; _j++) {\n              var lists = arrlist[_i].fileRecordList[_j];\n              var number = 0;\n              var obj = {\n                number: \"\",\n                file: lists.file,\n                time: lists.time\n              };\n              preList.push(obj);\n            }\n\n            that.fileRecordList = preList;\n          }\n        }\n      } else {\n        _this2.$message.error(res.data.msg);\n      }\n    });\n  },\n  //线索台账保存处置方式进度\n  saverecord: function saverecord() {\n    var _this3 = this;\n\n    var that = this; // console.log(that.textareaobj.disponsalWay)\n    // console.log(that.content)\n\n    that.textareaobj.textarealist.map(function (list) {\n      if (that.disponsalWay == list.disponsalWay) {\n        that.textareaobj.textarealist[that.pages - 1].content = list.content;\n        that.textareaobj.textarealist[that.pages - 1].id = list.id;\n      }\n    });\n    var objs = \"\";\n\n    if (this.$route.query.id) {\n      console.log(\"---\");\n      objs = {\n        \"cluesParameter.id\": that.$route.query.id,\n        //线索台账id\n        disponsalWay: that.disponsalWay,\n        userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd,\n        content: that.textareaobj.textarealist[that.pages - 1].content,\n        id: that.textareaobj.textarealist[that.pages - 1].id\n      };\n      this.$ajax({\n        method: \"post\",\n        url: this.globals.requesturl + \"web/cluesparameter/saveRecord\",\n        data: objs,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          console.log(res.data);\n\n          _this3.$message.success(res.data.msg);\n        } else {\n          _this3.$message.error(res.data.msg);\n        }\n      });\n    } else {\n      objs = JSON.parse(this.$route.query.str);\n      objs.disponsalWay = that.disponsalWay + \"\";\n      objs.content = that.textareaobj.textarealist[that.pages - 1].content;\n      objs.recordId = that.textareaobj.textarealist[that.pages - 1].id;\n      objs.dw = that.proposedDispositionList[that.nextspan].value, this.$ajax({\n        method: \"post\",\n        url: this.globals.requesturl + \"web/cluesparameter/firstSave\",\n        data: objs,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.errorCode == \"-1\") {\n          _this3.$message.success(res.data.msg);\n\n          _this3.$router.push({\n            path: '/standBook'\n          });\n        } else {\n          _this3.$message.error(res.data.msg);\n        }\n      });\n    }\n  },\n  // 上传附件\n  headgetfile: function headgetfile(event) {\n    var _this4 = this;\n\n    console.log(\"olooooo\");\n    var that = this;\n    that.textareaobj.textarealist.map(function (list) {\n      if (that.disponsalWay == list.disponsalWay) {\n        that.textareaobj.textarealist[that.pages - 1].content = list.content;\n        that.textareaobj.textarealist[that.pages - 1].id = list.id;\n      }\n    }); // let objs = {\n    //   'cluesParameter.id': that.$route.query.id, //线索台账id\n    //   disponsalWay: that.disponsalWay,\n    //   userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n    //   content: that.textareaobj.textarealist[that.pages-1].content,\n    //   id: that.textareaobj.textarealist[that.pages-1].id\n    // }\n\n    var filesarr = [];\n    var fileList = event.target.files;\n    var formdatas = new FormData();\n    formdatas.append(\"userId\", JSON.parse(localStorage.getItem(\"userinfo\")).isd);\n    formdatas.append(\"disponsalWay\", that.disponsalWay);\n    formdatas.append(\"content\", that.textareaobj.textarealist[that.pages - 1].content);\n    formdatas.append(\"id\", that.textareaobj.textarealist[that.pages - 1].id); // formdatas.append('files',fileList)\n\n    for (var i = 0; i < fileList.length; i++) {\n      formdatas.append(\"files\", fileList[i]);\n    }\n\n    this.$ajax({\n      method: \"POST\",\n      data: formdatas,\n      url: this.globals.requesturl + \"web/cluesparameter/uploadFile\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      } // transformRequest: [function (data) { //   return qs.stringify(data) // }]\n\n    }).then(function (res) {\n      console.log(res.data);\n      _this4.fileList = []; //此处重置文件中间存储变量是为了相同文件能够重复传递\n\n      if (true === res.data.success) {\n        _this4.$message.success(\"\\u6210\\u529F\");\n      } else {\n        _this4.$message.error(\"\\u5931\\u8D25\");\n\n        console.log(222);\n      }\n    }, function (err) {\n      _this4.$message.error(\"\\u5931\\u8D25\");\n    });\n  },\n  // 弹窗里的确定\n  submitchangeunit: function submitchangeunit() {\n    var _this5 = this;\n\n    // this.pages = this.nextspan+1 \n    // this.step = this.nextspan\n    if (this.$route.query.id) {\n      if (this.nextspan < 2) {\n        this.step = this.nextspan;\n      } else if (this.nextspan > 9) {\n        this.step = this.nextspan == 10 ? 3 : this.nextspan == 11 ? 4 : '';\n      } else {\n        this.pages = this.nextspan - 1;\n      }\n\n      var that = this;\n      var querstr = \"\";\n      var id = \"\";\n      that.textareaobj.textarealist.map(function (list) {\n        if (that.textareaobj.disponsalWay == list.disponsalWay) {\n          querstr = list.content;\n          id = list.id;\n        }\n      });\n      var requeststr = {\n        userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd,\n        disponsalWay: that.textareaobj.disponsalWay,\n        content: querstr,\n        'dw': that.proposedDispositionList[that.nextspan].value,\n        id: id,\n        'cluesParameter.id': this.$route.query.id\n      };\n      this.$ajax({\n        method: \"POST\",\n        data: requeststr,\n        url: this.globals.requesturl + \"web/cluesparameter/saveRecord\",\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.success && res.data.errorCode == \"-1\") {\n          _this5.$message.success(\"\\u6210\\u529F\");\n\n          _this5.personnelpops = false;\n\n          _this5.$router.push({\n            path: '/standBook'\n          });\n        } else {\n          _this5.$message.error(\"\\u5931\\u8D25\");\n        }\n      }, function (err) {\n        _this5.$message.error(\"\\u5931\\u8D25\");\n      });\n    } else {\n      var _that = this;\n\n      var _querstr = \"\";\n      var _id = \"\";\n\n      _that.textareaobj.textarealist.map(function (list) {\n        if (_that.textareaobj.disponsalWay == list.disponsalWay) {\n          _querstr = list.content;\n          _id = list.id;\n        }\n      });\n\n      var _requeststr = {\n        userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd,\n        disponsalWay: _that.textareaobj.disponsalWay,\n        content: _querstr,\n        'dw': _that.proposedDispositionList[_that.nextspan].value,\n        id: _id,\n        'cluesParameter.id': this.$route.query.id\n      };\n      _requeststr = JSON.parse(this.$route.query.str);\n      _requeststr.disponsalWay = _that.disponsalWay + \"\";\n      _requeststr.content = _that.textareaobj.textarealist[_that.pages - 1].content;\n      _requeststr.recordId = _that.textareaobj.textarealist[_that.pages - 1].id;\n      _requeststr.dw = _that.proposedDispositionList[_that.nextspan].value, this.$ajax({\n        method: \"post\",\n        url: this.globals.requesturl + \"web/cluesparameter/firstSave\",\n        data: _requeststr,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          _this5.$message.success(res.data.msg);\n\n          _this5.$router.push({\n            path: '/standBook'\n          });\n\n          _this5.personnelpops = false;\n        } else {\n          _this5.$message.error(res.data.msg);\n        }\n      });\n    }\n  }\n});",null]}