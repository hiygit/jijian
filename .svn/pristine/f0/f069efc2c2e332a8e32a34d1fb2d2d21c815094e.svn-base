{"remainingRequest":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\src\\views\\StandBookEnter\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\src\\views\\StandBookEnter\\index.vue","mtime":1582854157061},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nfunction f(arr, selectedKey) {\r\n  return arr.filter(item => item.value !== selectedKey).map(item => {\r\n    item = Object.assign({}, item)\r\n    if (item.children) {\r\n      item.children = f(item.children, selectedKey)\r\n    }\r\n    return item\r\n  })\r\n}\r\nimport Breadcrumb from \"../../components/Breadcrumb\";\r\nimport qs from 'qs'\r\nexport default {\r\n  name: \"StandBookEnter\",\r\n  // props: {},\r\n  data() {\r\n    return {\r\n      getIndex:\"\",\r\n      arrs: [\r\n        {\r\n          islength: 0,\r\n          ismore: true, //展开-收起\r\n          radiobtn: false, //姓名前面的单选按钮\r\n          id: \"\",\r\n          disponsalWay: \"\",//处置方式（为判断走到哪一步，不需要显示）\r\n          //被反应人信息\r\n          personnelid:\"\",//被反映人id\r\n          personnelName:\"\",//姓名\r\n          idCard:\"\",//身份证\r\n          sex: \"\",//性别\r\n          birthday:\"\",//出生年月\r\n          maritalStatus:\"\",//婚姻状况\r\n          nativePlace:\"\",//籍贯\r\n          educationBackground:\"\",//文化程度\r\n          politicsStatus:\"\",//政治面貌\r\n          officeName:\"\",//工作单位\r\n          phone:\"\",//联系方式\r\n          nation:\"\",//民族\r\n          workingState:\"\",//在职情况\r\n          presentOccupation:\"\",//职务\r\n          jobLevel:\"\",//职级\r\n          isCommitteeMember:\"\",//市委\r\n          // isCommunistPartyMember:\"\",//市委\r\n          isCityCommissionPartyMembericipal:\"\",//市纪委\r\n          isCPPCCMemberOrNot:\"\",//是否政协委员\r\n          isNPCDEputiesOrNot:\"\",//是否人大代表\r\n          isPartyRepresentativeOrNot:\"\",//是否党代表\r\n          personalResume:\"\",//工作简历\r\n          //处置理由\r\n          disposalOfReason: \"\",//处置理由\r\n          proposedDisposition: \"\",//拟处置方式\r\n          thereWillBeTime: \"\",//上会时间\r\n          savedispose:\"\", //保存时候传的处置方式\r\n          //违纪违法内容\r\n          violationOfPartyDiscipline:\"\",//六大纪律\r\n          isDeregulation:\"\",//八项规定\r\n          isFourWindsProblem:\"\",//四风问题\r\n          // corruption:\"\",//腐败\r\n          isEighteenthAfter:\"\",//十八大问题\r\n          isPovertyAlleviationProblem:\"\",//扶贫\r\n          isAntitriadPutting:\"\",//涉黑\r\n          isCorruptionLivelihoodSector: \"\",//是否民生领域腐败\r\n          // 办理情况\r\n          istransferred:\"\",//是否办结\r\n          // transferredResultname:\"\",//办理结果\r\n          // transferredResultid:\"\",//办理结果\r\n          transferredResult:\"\",\r\n          transferredResultName:\"\",\r\n          transferredTime:\"\",//办结时间\r\n          accountabilityMeans:\"\",//问责方式\r\n          isHoldDemocraticMeetings:\"\",//是否召开民主生活会\r\n          holdDemocraticMeetingsTime:\"\",//召开民主生活会时间\r\n          // execute:\"\",//处分是否执行到位\r\n          isArchive:\"\",//是否归档\r\n          isPunishmentExecution:\"\",\r\n          accountabilityFor: \"\",//问责事由\r\n          //备注\r\n          // remark1:\"\",\r\n          // remark2:\"\",\r\n          // 处置\r\n          disposition:[],\r\n        }\r\n      ],\r\n      ele: 0,\r\n      showRadio: true, //姓名-单选按钮 根据内部人员、单位和外部人员、单位 判断 显示隐藏\r\n      isPack: false,\r\n      delId: \"\",\r\n      id: \"\",\r\n      // personnelOfficeName: \"\",\r\n      personnelOfficeId: \"\",//被反应人单位\r\n      personnelOfficeName: \"\",\r\n      loading:true,\r\n      // itemid: \"\",\r\n      step:0,//进度步骤\r\n      showinput:false,//工作单位查看时显示\r\n      disabled:false,\r\n      idshow: false,\r\n      show: false,//保存\r\n      updata: false,//更新进度\r\n      nextsave: false,//下一步弹窗里的保存\r\n      personnelpops:false,//保存弹框显示切换\r\n      personnelpops1:false,//查找弹框显示切换\r\n      outOffice:false,//外部单位\r\n      insideOffice:false,//内部单位\r\n      systemtype:\"\",//保存传的类型 内部：1-人员 2-单位  外部：3-人员 4-单位\r\n      system:{\r\n        systemoffice:\"\",//系统内部单位\r\n        outOfficeName: \"\",//系统外部单位\r\n      },\r\n      transactionlist: [],//办理结果 级联选择\r\n\r\n      // disponsalWay: \"\",//处置方式（为判断走到哪一步，不需要显示）\r\n      unitslist: [],//级联选择\r\n      sourcelist: [],//线索来源\r\n      proposedDispositionList: [],//拟处置方式\r\n      violationOfPartyDisciplineList: [],//党六大纪律\r\n      transferredResultList: [],//办理结果\r\n      accountabilityMeansList: [],//问责方式\r\n      sexlist:[],//性别数组\r\n      educationBackgroundList: [],//文化程度数组\r\n      politicallist:[],//政治面貌数组\r\n      marriagelist:[],//婚姻数组\r\n      dutyRankList:[],//职务级别\r\n      workingStateList: [],//在职情况\r\n      isnoList: [],//是否\r\n      tableHeight: \"40vh\",\r\n      templateSelection: '',\r\n      tableData: [\r\n        // {\r\n          // name:\"\",//姓名\r\n          // tableoffice:\"\",//单位\r\n          // tablepost:\"\",//岗位}\r\n        // {\r\n        //   'id': 1,\r\n        //   'title': '嘿嘿嘿',\r\n        //   'priority': '高',\r\n        //   'state': 1,\r\n        //   'dealingPeople': '小龙女'\r\n        // },\r\n        // {\r\n        //   'id': 2,\r\n        //   'title': 'hengheng',\r\n        //   'priority': '高',\r\n        //   'state': 1,\r\n        //   'dealingPeople': '小龙女'\r\n        // },\r\n        // {\r\n        //     'id': 3,\r\n        //     'title': '嘿嘿嘿',\r\n        //     'priority': '高',\r\n        //     'state': 1,\r\n        //     'dealingPeople': '小龙女'\r\n        // },\r\n        // {\r\n        //   'id': 4,\r\n        //   'title': 'hengheng',\r\n        //   'priority': '高',\r\n        //   'state': 1,\r\n        //   'dealingPeople': '小龙女'\r\n        // },\r\n      ],\r\n      // // 处置\r\n      disposition:[],\r\n      //备注\r\n      remarksform:{\r\n        remark1:\"\",\r\n        remark2:\"\",\r\n      },\r\n      //办理情况\r\n      // Todealwithsituation:{\r\n      //   istransferred:\"\",//是否办结\r\n      //   transferredResultname:\"\",//办理结果\r\n      //   transferredResultid:\"\",//办理结果\r\n      //   transferredTime:\"\",//办结时间\r\n      //   accountabilityMeans:\"\",//问责方式\r\n      //   isHoldDemocraticMeetings:\"\",//是否召开民主生活会\r\n      //   holdDemocraticMeetingsTime:\"\",//召开民主生活会时间\r\n      //   execute:\"\",//处分是否执行到位\r\n      //   isArchive:\"\",//是否归档\r\n      //   isPunishmentExecution:\"\",\r\n      //   accountabilityFor: \"\",//问责事由\r\n      // },\r\n      //违纪违法内容\r\n      // dacform:{\r\n      //   violationOfPartyDiscipline:\"\",//六大纪律\r\n      //   isDeregulation:\"\",//八项规定\r\n      //   isFourWindsProblem:\"\",//四风问题\r\n      //   corruption:\"\",//腐败\r\n      //   isEighteenthAfter:\"\",//十八大问题\r\n      //   isPovertyAlleviationProblem:\"\",//扶贫\r\n      //   isAntitriadPutting:\"\",//涉黑\r\n      //   isCorruptionLivelihoodSector: \"\",//是否民生领域腐败\r\n      // },\r\n\r\n      // 线索信息表单\r\n      msgform:{\r\n        clueStoTheSource:\"\",//线索来源\r\n        letterNumber:\"\",//来件编号\r\n        groupNumber:\"\",//组内线索编号\r\n        isDuplicateOrNot:\"\",//是否重复件\r\n        clueNumber:\"\",//线索件数\r\n        content:\"\",//反映的主要问题\r\n      },\r\n\r\n      // //被反应人信息\r\n      // byfind:{\r\n      //   personnelid:\"\",//被反映人id\r\n      //   personnelName:\"\",//姓名\r\n      //   idCard:\"\",//身份证\r\n      //   sex: \"\",//性别\r\n      //   birthday:\"\",//出生年月\r\n      //   maritalStatus:\"\",//婚姻状况\r\n      //   nativePlace:\"\",//籍贯\r\n      //   educationBackground:\"\",//文化程度\r\n      //   politicsStatus:\"\",//政治面貌\r\n      //   officeName:\"\",//工作单位\r\n      //   phone:\"\",//联系方式\r\n      //   nation:\"\",//民族\r\n      //   workingState:\"\",//在职情况\r\n      //   presentOccupation:\"\",//职务\r\n      //   jobLevel:\"\",//职级\r\n      //   isCommunistPartyMember:\"\",//市委\r\n      //   isCityCommissionPartyMembericipal:\"\",//市纪委\r\n      //   isCPPCCMemberOrNot:\"\",//是否政协委员\r\n      //   isNPCDEputiesOrNot:\"\",//是否人大代表\r\n      //   isPartyRepresentativeOrNot:\"\",//是否党代表\r\n      //   personalResume:\"\",//工作简历\r\n      // },\r\n\r\n      //反应人信息\r\n      find:{\r\n        reflectName:\"\",//姓名\r\n        reflectPhone:\"\",//联系方式\r\n        reflectunitname:\"\",//工作单位\r\n        reflectunitid:\"\",\r\n        reflectPresenToCcupation:\"\",//职务\r\n      },\r\n      \r\n      //处置理由\r\n      // form: {\r\n      //   disposalOfReason: \"\",//处置理由\r\n      //   proposedDisposition: \"\",//拟处置方式\r\n      //   thereWillBeTime: \"\",//上会时间\r\n      //   savedispose:\"\", //保存时候传的处置方式\r\n      // },\r\n      rules:{\r\n        clueStoTheSource:[{required: true, message: '请选择线索来源', trigger: 'blur'}],\r\n        groupNumber:[{required: true, message: '请填写组内线索编号', trigger: 'blur'}],\r\n        clueNumber:[{required: true, message: '请填写线索件数', trigger: 'blur'}],\r\n        isDuplicateOrNot:[{required: true, message: '请选择是否重复件', trigger: 'blur'}],\r\n      },\r\n    };\r\n  },\r\n  computed: {},\r\n  created() { \r\n    document.title = \"线索台账录入\";\r\n    let that = this\r\n    //线索来源\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"clue_sto_the_source\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res => {\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.sourcelist = res.data.body.dictValueList;\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    });\r\n    //处置方式\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"disponsal_way\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.proposedDispositionList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n    //党六大纪律\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"violation_of_party_discipline\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.violationOfPartyDisciplineList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n    //办理结果 \r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"transferred_result\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.transferredResultList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n    //问责方式\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"accountability_means\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.accountabilityMeansList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n    //性别\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'sex'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.sexlist = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //文化程度\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'education_background'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.educationBackgroundList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //政治面貌\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'politics_status'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.politicallist = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //婚姻\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'marital_status'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.marriagelist = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //职务级别  title_jobs_level\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'job_level'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.dutyRankList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //在职情况\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + 'web/dict',\r\n      data: {type:'working_state'},\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      transformRequest: [function (data) { \r\n        return qs.stringify(data)\r\n      }]\r\n    }).then(res=>{\r\n      if(res.data.success && res.data.errorCode == '-1'){\r\n        that.workingStateList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg); \r\n      }\r\n    })\r\n    //是否\r\n    this.$ajax({\r\n      method: \"POST\",\r\n      url: this.globals.requesturl + \"web/dict\",\r\n      data: { type: \"yes_no\" },\r\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      transformRequest: [\r\n        function(data) {\r\n          return qs.stringify(data);\r\n        }\r\n      ]\r\n    }).then(res=>{\r\n      if (res.data.success && res.data.errorCode == \"-1\") {\r\n        that.isnoList = res.data.body.dictValueList\r\n      }else{\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    })\r\n  },\r\n  mounted() {\r\n    if(this.$route.query.isactive == 0 && this.$route.query.radio == 1){ //内部人员\r\n      this.systemtype = 1\r\n      this.insideOffice = false\r\n      this.isPack = false\r\n      this.showRadio = false\r\n    }else if(this.$route.query.isactive == 1 && this.$route.query.radio == 1){ //内部单位\r\n      this.systemtype = 2\r\n      this.insideOffice = true\r\n      this.outOffice = false\r\n    }else if(this.$route.query.isactive == 0 && this.$route.query.radio == 2){ //外部人员\r\n      this.systemtype = 3\r\n      this.isPack = false\r\n    }else if(this.$route.query.isactive == 1 && this.$route.query.radio == 2){ //外部单位\r\n      this.systemtype = 4\r\n      this.outOffice = true\r\n      this.isPack = false\r\n    }\r\n\r\n    let id = this.$route.query.id\r\n    // console.log(this.$route.query.ifupdata)\r\n    if(id){\r\n      this.showinput = true\r\n      this.itemid = id\r\n      let objs = {\r\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n        id: id\r\n      }\r\n      this.show = this.$route.query.ifupdata == 0 ?true :false\r\n      this.updata = this.$route.query.ifupdata ?true :false\r\n      this.ifupdata = this.$route.query.ifupdata\r\n      this.init(objs)\r\n    }else{\r\n      this.nextsave = true\r\n    }\r\n    this.initunits()\r\n    this.transactionresultList()\r\n  },\r\n  methods: {\r\n    //下标处理\r\n    indexMethod(index){\r\n      return index+1>9?index+1:'0'+(index+1)\r\n    },\r\n    // 表格样式的处理\r\n    cellStyle({ row, column, rowIndex, columnIndex }) {\r\n      //基数偶数延时不同\r\n      if (rowIndex % 2 != 0) {\r\n        return {\r\n          \"background-color\": \"#2162A8\",\r\n          \"text-align\": \"center\",\r\n          color: \"#fff\",\r\n          \"font-weight\": \"normal\",\r\n          padding: \"5px 0\",\r\n          height: \"60px\"\r\n        };\r\n      } else {\r\n        return {\r\n          \"background-color\": \"#02468F\",\r\n          \"text-align\": \"center\",\r\n          color: \"#fff\",\r\n          \"font-weight\": \"normal\",\r\n          padding: \"5px 0\",\r\n          height: \"60px\"\r\n        };\r\n      }\r\n    },\r\n    headerCellStyle({ row, rowIndex }) {\r\n      return {\r\n        \"background-color\": \"#027DBC\",\r\n        \"text-align\": \"center\",\r\n        color: \"#fff\",\r\n        \"font-weight\": \"normal\",\r\n        \"font-size\": \"16px\"\r\n      };\r\n    },\r\n    //初始化\r\n    init(objs){\r\n      let that = this\r\n      this.$ajax({\r\n        method:\"POST\",\r\n        url: that.globals.requesturl + 'web/cluesparameter/form',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.success && res.data.errorCode == '-1'){\r\n          // console.log(res.data.body.type)\r\n          // console.log(this.arrs)\r\n          //处置方式判断\r\n          if(res.data.body.disponsalWay == 0){\r\n            that.disponsalWay = 0\r\n            that.isShow = false\r\n            that.step = 0\r\n          }else if(res.data.body.disponsalWay == 0){\r\n            that.disponsalWay = 1\r\n            that.step = 1\r\n            // that.isShow = false\r\n          }else if(res.data.body.disponsalWay == 2 || res.data.body.disponsalWay == 3 || res.data.body.disponsalWay == 4 || res.data.body.disponsalWay == 5 || res.data.body.disponsalWay == 6 || res.data.body.disponsalWay == 7 || res.data.body.disponsalWay == 8 || res.data.body.disponsalWay == 9){\r\n            that.disponsalWay = 2\r\n            that.step = 2\r\n          }else if(res.data.body.disponsalWay == 10){\r\n            that.disponsalWay = 3\r\n            that.step = 3\r\n          }else if(res.data.body.disponsalWay == 11){\r\n            that.disponsalWay == 4\r\n            that.step = 4\r\n            that.isShow = false\r\n          }\r\n          // that.step = that.disponsalWay\r\n          // that.step = res.data.body.disponsalWay\r\n          // console.log(that.step)\r\n\r\n          //根据type判断显示的内部人员、单位 或 外部人员、单位\r\n          if(res.data.body.type == 1){ //内部人员\r\n            this.isPack = false\r\n          }else if(res.data.body.type == 2){ //内部单位\r\n            this.insideOffice = true\r\n          }else if(res.data.body.type == 3){ //外部人员\r\n            this.isPack = false\r\n          }else if(res.data.body.type == 4){ //外部单位\r\n            this.outOffice = true\r\n            this.isPack = false\r\n          }\r\n          // type如果是1 3 4返回的是对象 如果是2返回的数组\r\n          if(res.data.body.type == 1 || res.data.body.type == 3 || res.data.body.type == 4){\r\n            this.arrs = []\r\n            let obj = {\r\n              islength: 0,\r\n              ismore: true, //展开-收起\r\n              radiobtn: false, //姓名前面的单选按钮\r\n              id: res.data.body.id,\r\n              disponsalWay: \"\",//处置方式（为判断走到哪一步，不需要显示）\r\n              //被反应人信息\r\n              personnelid: res.data.body.personnel.id,//被反映人id\r\n              personnelName: res.data.body.personnel.name,//姓名\r\n              // idCard:\"\",//身份证\r\n              sex: res.data.body.personnel.sex,//性别\r\n              birthday: res.data.body.personnel.birthday,//出生年月\r\n              maritalStatus: res.data.body.personnel.maritalStatus,//婚姻状况\r\n              nativePlace: res.data.body.personnel.nativePlace,//籍贯\r\n              educationBackground: res.data.body.personnel.educationBackground,//文化程度\r\n              politicsStatus: res.data.body.personnel.politicsStatus,//政治面貌\r\n              officeName: res.data.body.personnel.office.name,//工作单位\r\n              phone: res.data.body.personnel.phone,//联系方式\r\n              nation: res.data.body.personnel.nation,//民族\r\n              workingState: res.data.body.personnel.workingState,//在职情况\r\n              presentOccupation: res.data.body.personnel.presentOccupation,//职务\r\n              jobLevel: res.data.body.personnel.jobLevel,//职级\r\n              isCommitteeMember: res.data.body.personnel.isCommitteeMember,//市委\r\n              // isCommunistPartyMember:\"\",//市委\r\n              isCityCommissionPartyMembericipal: res.data.body.personnel.isCityCommissionPartyMembericipal,//市纪委\r\n              isCPPCCMemberOrNot: res.data.body.personnel.isCPPCCMemberOrNot,//是否政协委员\r\n              isNPCDEputiesOrNot: res.data.body.personnel.isNPCDEputiesOrNot,//是否人大代表\r\n              isPartyRepresentativeOrNot: res.data.body.personnel.isPartyRepresentativeOrNot,//是否党代表\r\n              personalResume: res.data.body.personnel.personalResume,//工作简历\r\n              //处置理由\r\n              disposalOfReason: res.data.body.disposalOfReason,//处置理由\r\n              proposedDisposition: res.data.body.proposedDisposition,//拟处置方式\r\n              thereWillBeTime: res.data.body.thereWillBeTime,//上会时间\r\n              savedispose: res.data.body.disponsalWay, //保存时候传的处置方式\r\n              //违纪违法内容\r\n              violationOfPartyDiscipline: res.data.body.violationOfPartyDiscipline != \"\" ? res.data.body.violationOfPartyDiscipline.split(\",\"):[],//六大纪律\r\n              isDeregulation: res.data.body.isDeregulation,//八项规定\r\n              isFourWindsProblem: res.data.body.isFourWindsProblem,//四风问题\r\n              isEighteenthAfter: res.data.body.isEighteenthAfter,//十八大问题\r\n              isPovertyAlleviationProblem: res.data.body.isPovertyAlleviationProblem,//扶贫\r\n              isAntitriadPutting: res.data.body.isAntitriadPutting,//涉黑\r\n              isCorruptionLivelihoodSector: res.data.body.isCorruptionLivelihoodSector,//是否民生领域腐败\r\n              // 办理情况\r\n              istransferred: res.data.body.istransferred,//是否办结\r\n              // transferredResultname:\"\",//办理结果\r\n              // transferredResultid:\"\",//办理结果\r\n              transferredResult: \"\",\r\n              transferredTime: res.data.body.transferredTime,//办结时间\r\n              accountabilityMeans: res.data.body.accountabilityMeans,//问责方式\r\n              isHoldDemocraticMeetings: res.data.body.isHoldDemocraticMeetings,//是否召开民主生活会\r\n              holdDemocraticMeetingsTime: res.data.body.isHoldDemocraticMeetings,//召开民主生活会时间\r\n              // execute: \"\",//处分是否执行到位\r\n              isArchive: res.data.body.isArchive,//是否归档\r\n              isPunishmentExecution: res.data.body.isPunishmentExecution,\r\n              accountabilityFor: res.data.body.accountabilityFor,//问责事由\r\n              //备注\r\n              // remark1:\"\",\r\n              // remark2:\"\",\r\n              // 处置\r\n              disposition:res.data.body.recordList,\r\n            }\r\n            that.arrs.push(obj)\r\n            \r\n          }else if(res.data.body.type == 2){\r\n            // type如果是1 3 4返回的是对象 如果是2返回的是数组\r\n            let cluesParameterChildrenList = res.data.body.cluesParameterChildrenList\r\n            let addPersonnelArr = [],typeOtherArr = []; \r\n            if(cluesParameterChildrenList.length > 0){\r\n              for(let i = 0; i < cluesParameterChildrenList.length; i++){\r\n                let list = cluesParameterChildrenList[i]\r\n                let obj = {\r\n                  islength: 0,\r\n                  ismore: true, //展开-收起\r\n                  radiobtn: false, //姓名前面的单选按钮\r\n                  id: list.id,\r\n                  disponsalWay: \"\",//处置方式（为判断走到哪一步，不需要显示）\r\n                  //被反应人信息\r\n                  personnelid: list.personnel.id,//被反映人id\r\n                  personnelName: list.personnel.name,//姓名\r\n                  // idCard:\"\",//身份证\r\n                  sex: list.personnel.sex,//性别\r\n                  birthday: list.personnel.birthday,//出生年月\r\n                  maritalStatus: list.personnel.maritalStatus,//婚姻状况\r\n                  nativePlace:list.personnel.nativePlace,//籍贯\r\n                  educationBackground: list.personnel.educationBackground,//文化程度\r\n                  politicsStatus: list.personnel.politicsStatus,//政治面貌\r\n                  officeName: list.personnel.office.name,//工作单位\r\n                  phone: list.personnel.phone,//联系方式\r\n                  nation: list.personnel.nation,//民族\r\n                  workingState: list.personnel.workingState,//在职情况\r\n                  presentOccupation: list.personnel.presentOccupation,//职务\r\n                  jobLevel: list.personnel.jobLevel,//职级\r\n                  isCommitteeMember: list.personnel.isCommitteeMember,//市委\r\n                  // isCommunistPartyMember:\"\",//市委\r\n                  isCityCommissionPartyMembericipal: list.personnel.isCityCommissionPartyMembericipal,//市纪委\r\n                  isCPPCCMemberOrNot: list.personnel.isCPPCCMemberOrNot,//是否政协委员\r\n                  isNPCDEputiesOrNot: list.personnel.isNPCDEputiesOrNot,//是否人大代表\r\n                  isPartyRepresentativeOrNot: list.personnel.isPartyRepresentativeOrNot,//是否党代表\r\n                  personalResume: list.personnel.personalResume,//工作简历\r\n                  //处置理由\r\n                  disposalOfReason: list.disposalOfReason,//处置理由\r\n                  proposedDisposition: list.proposedDisposition,//拟处置方式\r\n                  thereWillBeTime: list.thereWillBeTime,//上会时间\r\n                  // savedispose:\"\", //保存时候传的处置方式\r\n                  //违纪违法内容\r\n                  // violationOfPartyDiscipline: list.violationOfPartyDiscipline != \"\" ? list.violationOfPartyDiscipline.split(\",\"):[],//六大纪律\r\n                  isDeregulation: list.isDeregulation,//八项规定\r\n                  isFourWindsProblem: list.isFourWindsProblem,//四风问题\r\n                  isEighteenthAfter: list.isEighteenthAfter,//十八大问题\r\n                  isPovertyAlleviationProblem: list.isPovertyAlleviationProblem,//扶贫\r\n                  isAntitriadPutting: list.isAntitriadPutting,//涉黑\r\n                  isCorruptionLivelihoodSector: list.isCorruptionLivelihoodSector,//是否民生领域腐败\r\n                  // 办理情况\r\n                  istransferred: list.istransferred,//是否办结\r\n                  // transferredResultname:\"\",//办理结果\r\n                  // transferredResultid:\"\",//办理结果\r\n                  transferredResult: \"\",\r\n                  transferredTime: list.transferredTime,//办结时间\r\n                  accountabilityMeans: list.accountabilityMeans,//问责方式\r\n                  isHoldDemocraticMeetings: list.isHoldDemocraticMeetings,//是否召开民主生活会\r\n                  holdDemocraticMeetingsTime: list.isHoldDemocraticMeetings,//召开民主生活会时间\r\n                  // execute: \"\",//处分是否执行到位\r\n                  isArchive: list.isArchive,//是否归档\r\n                  isPunishmentExecution: list.isPunishmentExecution,\r\n                  accountabilityFor: list.accountabilityFor,//问责事由\r\n                  //备注\r\n                  // remark1:\"\",\r\n                  // remark2:\"\",\r\n                  // 处置\r\n                  disposition:[], \r\n                }\r\n                let rescordList = []\r\n                for(let j = 0; j < cluesParameterChildrenList[i].recordList.length; j++){\r\n                  let listRecordList = cluesParameterChildrenList[i].recordList[j]\r\n                  rescordList.push(listRecordList)\r\n                }\r\n                obj.disposition = rescordList\r\n                addPersonnelArr.push(obj);\r\n              }\r\n              that.arrs = addPersonnelArr;\r\n            }\r\n          }\r\n          //页面渲染\r\n          that.system.outOfficeName = res.data.body.outOfficeName,\r\n          // that.form.savedispose = res.data.body.disponsalWay //保存时候传的处置方式\r\n          // console.log(that.form.savedispose)\r\n          that.msgform.letterNumber = res.data.body.letterNumber\r\n          that.msgform.groupNumber = res.data.body.groupNumber \r\n          that.msgform.clueNumber = res.data.body.clueNumber\r\n          that.msgform.content = res.data.body.content\r\n          that.msgform.clueStoTheSource = res.data.body.clueStoTheSource\r\n          that.msgform.isDuplicateOrNot = res.data.body.isDuplicateOrNot\r\n          that.find.reflectPresenToCcupation = res.data.body.reflectPresenToCcupation\r\n          that.find.reflectName = res.data.body.reflectName\r\n          that.find.reflectPhone = res.data.body.reflectPhone\r\n          that.find.reflectunitname = res.data.body.reflectunit.name//反映人单位\r\n          that.find.reflectunitid = res.data.body.reflectunit.id//反映人单位id\r\n          that.remarksform.remark1 = res.data.body.remark1\r\n          that.remarksform.remark2 = res.data.body.remark2\r\n          that.personnelOfficeName = res.data.body.cluesParameterChildrenList[0].personnel.office.name;\r\n          that.personnelOfficeId = res.data.body.cluesParameterChildrenList[0].personnel.office.id//反映人单位id\r\n          \r\n          \r\n          // that.byfind.personnelid = res.data.body.personnel.id\r\n          // that.byfind.personnelName = res.data.body.personnel.name\r\n          // that.byfind.idCard = res.data.body.personnel.idCard\r\n          // that.byfind.sex = res.data.body.personnel.sex\r\n          // that.byfind.birthday = res.data.body.personnel.birthday\r\n          // that.byfind.maritalStatus = res.data.body.personnel.maritalStatus\r\n          // that.byfind.nativePlace = res.data.body.personnel.nativePlace\r\n          // that.byfind.educationBackground = res.data.body.personnel.educationBackground\r\n          // that.byfind.politicsStatus = res.data.body.personnel?res.data.body.personnel.politicsStatus:\"\"\r\n          // that.byfind.officeName = res.data.body.personnel&&res.data.body.personnel.office?res.data.body.personnel.office.name:\"\"\r\n          // that.byfind.phone = res.data.body.personnel.phone\r\n          // that.byfind.nation = res.data.body.personnel.nation\r\n          // that.byfind.presentOccupation = res.data.body.personnel.presentOccupation\r\n          // that.byfind.jobLevel = res.data.body.personnel.jobLevel\r\n          // that.byfind.personalResume = res.data.body.personnel.personalResume\r\n          // that.form.disposalOfReason = res.data.body.disposalOfReason\r\n          // that.form.thereWillBeTime = res.data.body.thereWillBeTime\r\n          // that.Todealwithsituation.transferredTime = res.data.body.transferredTime\r\n          // that.Todealwithsituation.holdDemocraticMeetingsTime = res.data.body.holdDemocraticMeetingsTime \r\n          // that.Todealwithsituation.accountabilityFor = res.data.body.accountabilityFor\r\n          \r\n          // that.form.proposedDisposition = res.data.body.proposedDisposition\r\n          // that.dacform.violationOfPartyDiscipline = res.data.body.violationOfPartyDiscipline != \"\" ? res.data.body.violationOfPartyDiscipline.split(\",\"):[]\r\n          // // that.Todealwithsituation.transferredResultname = res.data.body.transferredResult.name//办理结果\r\n          // // that.Todealwithsituation.transferredResultid = res.data.body.transferredResult.id//办理结果id\r\n          // that.Todealwithsituation.transferredResult = res.data.body.transferredResult//办理结果id\r\n          // that.Todealwithsituation.accountabilityMeans = res.data.body.accountabilityMeans\r\n          // that.byfind.maritalStatus = res.data.body.personnel.maritalStatus\r\n          // that.byfind.workingState = res.data.body.personnel.workingState\r\n          // that.msgform.isDuplicateOrNot = res.data.body.isDuplicateOrNot\r\n          // that.dacform.isDeregulation = res.data.body.isDeregulation\r\n          // that.dacform.isFourWindsProblem = res.data.body.isFourWindsProblem\r\n          // that.dacform.isEighteenthAfter = res.data.body.isEighteenthAfter\r\n          // that.dacform.isPovertyAlleviationProblem = res.data.body.isPovertyAlleviationProblem\r\n          // that.dacform.isAntitriadPutting = res.data.body.isAntitriadPutting\r\n          // that.dacform.isCorruptionLivelihoodSector = res.data.body.isCorruptionLivelihoodSector\r\n          // that.Todealwithsituation.istransferred = res.data.body.istransferred\r\n          // that.Todealwithsituation.isHoldDemocraticMeetings = res.data.body.isHoldDemocraticMeetings\r\n          // that.Todealwithsituation.isPunishmentExecution = res.data.body.isPunishmentExecution\r\n          // that.Todealwithsituation.isArchive = res.data.body.isArchive\r\n          // that.byfind.isCommunistPartyMember = res.data.body.personnel.isCommunistPartyMember\r\n          // that.byfind.isCityCommissionPartyMember = res.data.body.personnel.isCityCommissionPartyMember\r\n          // // ====================== 新增三个是否 ==========================\r\n          // that.byfind.isCPPCCMemberOrNot = res.data.body.personnel.isCPPCCMemberOrNot\r\n          // that.byfind.isNPCDEputiesOrNot = res.data.body.personnel.isNPCDEputiesOrNot\r\n          // that.byfind.isPartyRepresentativeOrNot = res.data.body.personnel.isPartyRepresentativeOrNot\r\n          // // ==============================================================\r\n          // res.data.body.recordList.map(function(list){\r\n          //   that.disposition.push(list)\r\n          // })\r\n        }else{\r\n          this.$message.error(res.data.msg);\r\n        }\r\n      })\r\n    },\r\n    // 查询单位\r\n    initunits(){\r\n      let that = this; \r\n      let objs = {\r\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n      } \r\n      this.$ajax({\r\n        method: \"POST\",\r\n        url: that.globals.requesturl + 'web/office/list',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.errorCode == \"-1\"){\r\n          let lists = [];\r\n          that.unitslist = res.data.body.officeList.map(function(list,index){\r\n            return {\r\n              id: list.id,\r\n              name: list.name,\r\n              children: []\r\n            }\r\n          })\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    //级联事件\r\n    unitChanges(data) {\r\n      // console.log(data)\r\n      // console.log(data[data.length-1])\r\n      let that = this;\r\n      let objs = {\r\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n        parentId:data[data.length-1]\r\n      } \r\n      this.$ajax({\r\n        method: \"POST\",\r\n        url: that.globals.requesturl + 'web/office/getChildren',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.errorCode == \"-1\"){\r\n          if(data.length == 1){\r\n            that.unitslist.map(function(list,index){\r\n              if(list.id == data[0]){\r\n                if(!list.children.length){\r\n                  list.children = res.data.body.officeList.map(function(list,index){\r\n                    return {\r\n                      id: list.id,\r\n                      name: list.name,\r\n                      children: list.hasChildren==false?\"\":[]\r\n                    }\r\n                  })\r\n                }\r\n              }\r\n            })\r\n          }else if(data.length == 2){\r\n            that.unitslist.map(function(list,index){\r\n              if(list.id == data[0]){\r\n                list.children.map(function(list,index){\r\n                  if(list.id == data[1]){\r\n                    if(!list.children.length){\r\n                      list.children = res.data.body.officeList.map(function(list,index){\r\n                        return {\r\n                          id: list.id,\r\n                          name: list.name,\r\n                          children:list.hasChildren==false?\"\":[]\r\n                        }\r\n                      })\r\n                    }\r\n                  }\r\n                })\r\n              }\r\n            })\r\n          }\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    // 办理结果\r\n    transactionresultList(){\r\n      let that = this; \r\n      let objs = {\r\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n      } \r\n      this.$ajax({\r\n        method: \"POST\",\r\n        url: that.globals.requesturl + 'web/transactionresult/list',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.errorCode == \"-1\"){\r\n          // console.log(res.data)\r\n          let lists = [];\r\n          that.transactionlist = res.data.body.transactionResultList.map(function(list,index){\r\n            return {\r\n              id: list.id,\r\n              name: list.name,\r\n              children: list.hasChildren==0?\"\":[]\r\n            }\r\n          })\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    // 办理结果级联事件\r\n    transactionChanges(data) {\r\n      // console.log(data)\r\n      // console.log(data[data.length-1])\r\n      let that = this;\r\n      let objs = {\r\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n        parentId:data[data.length-1]\r\n      } \r\n      this.$ajax({\r\n        method: \"POST\",\r\n        url: that.globals.requesturl + 'web/transactionresult/getChildren',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.errorCode == \"-1\"){\r\n          if(data.length == 1){\r\n            that.transactionlist.map(function(list,index){\r\n              if(list.id == data[0]){\r\n                if(!list.children.length){\r\n                  list.children = res.data.body.transactionResultList.map(function(list,index){\r\n                    // console.log(\"hasChildren:\"+list.hasChildren)\r\n                    return {\r\n                      id: list.id,\r\n                      name: list.name,\r\n                      children: list.hasChildren==0?\"\":[]\r\n                    }\r\n                  })\r\n                }\r\n              }\r\n            })\r\n          }\r\n          // else if(data.length == 2){\r\n          //   that.transactionlist.map(function(list,index){\r\n          //     if(list.id == data[0]){\r\n          //       list.children.map(function(list,index){\r\n          //         if(list.id == data[1]){\r\n          //           if(!list.children.length){\r\n          //             list.children = res.data.body.officeList.map(function(list,index){\r\n          //               return {\r\n          //                 id: list.id,\r\n          //                 name: list.name,\r\n          //                 children:list.hasChildren==false?\"\":[]\r\n          //               }\r\n          //             })\r\n          //           }\r\n          //         }\r\n          //       })\r\n          //     }\r\n          //   })\r\n          // }\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    //保存\r\n    savebtns(){\r\n      this.personnelpops = true\r\n    },\r\n    //保存弹窗确定按钮\r\n    submitchangeunit(formName){ ``\r\n      // console.log(this.arrs)\r\n      let that = this\r\n      this.personnelpops = false\r\n      this.$refs[formName].validate((valid) => {\r\n        if(valid){\r\n          let officePersonnel = this.arrs\r\n          for(let i=0;i<that.arrs.length;i++){\r\n            // let sixArr = that.arrs[i]\r\n            // that.arrs[i].violationOfPartyDiscipline = that.arrs[i].violationOfPartyDiscipline.join(',')\r\n            // that.arrs[i].transferredResult = that.arrs[i].transferredResult != \"\" ? that.arrs[i].transferredResult.join(',') : \"\"\r\n            // that.arrs[i].transferredResult = typeof(that.arrs[i].transferredResult) == 'string' ? that.arrs[i].transferredResult : that.that.arrs[i].transferredResultName[that.arrs[i].transferredResultName.length-1]\r\n            // \r\n          }\r\n          // console.log(that.arrs)\r\n          let forminfo = {\r\n            type: this.$route.query.type ? this.$route.query.type : this.systemtype,\r\n            outOfficeName: that.system.outOfficeName,\r\n            id: that.itemid, //id\r\n            // \"personnel.id\": that.byfind.personnelid,//被反应人id\r\n            reflectName: that.find.reflectName,//反映人姓名\r\n            // \"reflectunit.id\": that.find.reflectunitname?that.find.reflectunitname[that.find.reflectunitname.length-1]:'',//反映人单位id\r\n            \"reflectunit.id\": typeof(that.find.reflectunitname) == 'string' ? that.find.reflectunitid : that.find.reflectunitname[that.find.reflectunitname.length-1],//反映人单位id\r\n            reflectPresenToCcupation: that.find.reflectPresenToCcupation,//反映人职务\r\n            reflectPhone: that.find.reflectPhone,//反映人联系方式\r\n            clueStoTheSource: that.msgform.clueStoTheSource,//线索来源\r\n            letterNumber: that.msgform.letterNumber,//来件编号\r\n            groupNumber: that.msgform.groupNumber,//组内线索编号\r\n            clueNumber: that.msgform.clueNumber,//线索件数\r\n            content: that.msgform.content,//反映的主要问题\r\n            isDuplicateOrNot: that.msgform.isDuplicateOrNot,//来件编号\r\n            // personnelOfficeName: that.personnelOfficeName,\r\n            \"office.id\": typeof(that.personnelOfficeName) == 'string' ? that.personnelOfficeId : that.personnelOfficeName[that.personnelOfficeName.length-1],\r\n            officePersonnelList: JSON.stringify(this.arrs),\r\n            // \"officePersonnelList[0].proposedDisposition\": \"\",//拟处置方式\r\n            // // proposedDisposition: that.form.proposedDisposition,//拟处置方式\r\n            // \"officePersonnelList[0].thereWillBeTime\": \"\",//上会时间\r\n            // // thereWillBeTime: that.form.thereWillBeTime,//上会时间\r\n            // \"officePersonnelList[0].disposalOfReason\": \"\",//处置理由\r\n            // // disposalOfReason: that.form.disposalOfReason,//处置理由\r\n            // \"officePersonnelList[0].disponsalWay\": \"\",//处置方式\r\n            // // // disponsalWay: that.disponsalWay,//处置方式\r\n            // // disponsalWay: that.form.savedispose,//处置方式\r\n            // \"officePersonnelList[0].violationOfPartyDiscipline\": \"\",//违反党六大纪律\r\n            // // violationOfPartyDiscipline: that.dacform.violationOfPartyDiscipline.length>0?that.dacform.violationOfPartyDiscipline.join(\",\"):\"\",//违反党六大纪律\r\n            // \"officePersonnelList[0].isDeregulation\": \"\",//是否违反中央八项规定\r\n            // // isDeregulation: that.dacform.isDeregulation,//是否违反中央八项规定\r\n            // \"officePersonnelList[0].isFourWindsProblem\": \"\",//是否存在“四风”问题\r\n            // // isFourWindsProblem: that.dacform.isFourWindsProblem,//是否存在“四风”问题\r\n            // \"officePersonnelList[0].isEighteenthAfter\": \"\",//是否十八大以后问题\r\n            // // isEighteenthAfter: that.dacform.isEighteenthAfter,//是否十八大以后问题\r\n            // \"officePersonnelList[0].isPovertyAlleviationProblem\": \"\",//是否涉及扶贫领域问题\r\n            // // isPovertyAlleviationProblem: that.dacform.isPovertyAlleviationProblem,//是否涉及扶贫领域问题\r\n            // \"officePersonnelList[0].isAntitriadPutting\": \"\",//是否涉及扫黑除恶\r\n            // // isAntitriadPutting: that.dacform.isAntitriadPutting,//是否涉及扫黑除恶\r\n            // \"officePersonnelList[0].istransferred\": \"\",//是否办结\r\n            // // istransferred: that.Todealwithsituation.istransferred,//是否办结\r\n            // \"officePersonnelList[0].transferredResult\": \"\",//办理结果\r\n            // // // transferredResult: that.Todealwithsituation.transferredResult,//办理结果\r\n            // // // transferredResult: typeof(that.Todealwithsituation.transferredResult) == 'string' ? that.Todealwithsituation.transferredResultid : that.Todealwithsituation.transferredResult[that.Todealwithsituation.transferredResult.length-1],\r\n            // \"officePersonnelList[0].accountabilityMeans\": \"\",//问责方式\r\n            // // accountabilityMeans: that.Todealwithsituation.accountabilityMeans,//问责方式\r\n            // \"officePersonnelList[0].isHoldDemocraticMeeti\": \"\",//是否召开民主生活会\r\n            // // isHoldDemocraticMeetings: that.Todealwithsituation.isHoldDemocraticMeetings,//是否召开民主生活会\r\n            // \"officePersonnelList[0].holdDemocraticMeetingsTime\": \"\",//民主生活会召开时间\r\n            // // holdDemocraticMeetingsTime: that.Todealwithsituation.holdDemocraticMeetingsTime, //民主生活会召开时间\r\n\r\n            // // transferredTime:that.Todealwithsituation.transferredTime, //办结时间\r\n            // // thereWillBeTime:that.form.thereWillBeTime,//上会时间\r\n            // \"officePersonnelList[0].isPunishmentExecution\": \"\",//处分是否执行到位\r\n            // // isPunishmentExecution: that.Todealwithsituation.isPunishmentExecution,//处分是否执行到位\r\n            // \"officePersonnelList[0].isCommitteeMember\": \"\",//是否市纪委委员\r\n            // // isCommitteeMember:that.byfind.isCommunistPartyMember, //是否市纪委委员\r\n            // // remark1: that.remarksform.remark1,\r\n            // // remark2: that.remarksform.remark2,\r\n            // // isArchive:that.Todealwithsituation.isArchive,\r\n            // \"officePersonnelList[0].accountabilityFor\": \"\",//问责事由\r\n            // // accountabilityFor: that.Todealwithsituation.accountabilityFor,//问责事由\r\n            // \"officePersonnelList[0].isCorruptionLivelihoodSector\": \"\",//是否民生领域腐败\r\n            // isCorruptionLivelihoodSector: that.dacform.isCorruptionLivelihoodSector,//是否民生领域腐败\r\n            // reflectunitname:that.find.reflectunitname?that.find.reflectunitname:\"\",\r\n            userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n            problemClueDisposalRecords: JSON.stringify(that.disposition),\r\n            remark1: that.remarksform.remark1,\r\n            remark2: that.remarksform.remark2,\r\n          }\r\n          this.$ajax({\r\n            method: \"POST\",\r\n            url: that.globals.requesturl + 'web/cluesparameter/save',\r\n            data: forminfo,\r\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n            transformRequest: [function (data) { \r\n              return qs.stringify(data)\r\n            }]\r\n          }).then(res=>{\r\n            if(res.data.errorCode == \"-1\"){\r\n              // console.log(this.systemtype)\r\n              this.$message.success(res.data.msg); \r\n              this.cluesParameter = res.data.body.id\r\n              this.$router.push({path: '/updateprogress',query: {id: res.data.body.id}})\r\n            }else{\r\n              this.$message.error(res.data.msg); \r\n            }\r\n          })\r\n        }else{\r\n          return false;\r\n        }\r\n      })\r\n    },\r\n    //查找人员列表\r\n    getPersonnelList(item,index){\r\n      this.getIndex = index\r\n      let that = this\r\n      let objs = {\r\n        name: item.personnelName,\r\n        // idCard: that.byfind.idCard\r\n        type: this.systemtype\r\n      }\r\n      this.$ajax({\r\n        method:\"POST\",\r\n        url: that.globals.requesturl + 'web/cluesparameter/getPersonnelList',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.success && res.data.errorCode == '-1'){\r\n          let that = this\r\n          this.personnelpops1 = true\r\n          let personnelList = []\r\n          res.data.body.personnelList.map(function(list){\r\n            personnelList.push({\r\n              id: list.id,\r\n              name: list.name,\r\n              presentOccupation: list.presentOccupation,\r\n              officename: list.office.name\r\n            })\r\n            // console.log(personnelList)\r\n            that.tableData = personnelList\r\n          })\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    // 查询里的确定按钮 查找人员详细信息\r\n    getPersonnel(){\r\n      // console.log(this.templateRadio)\r\n      let that = this\r\n      let objs = {\r\n        id: this.templateRadio\r\n      }\r\n      this.$ajax({\r\n        method:\"POST\",\r\n        url: that.globals.requesturl + 'web/cluesparameter/getPersonnel',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.success && res.data.errorCode == '-1'){\r\n          // console.log(res.data.body)\r\n          // console.log(this.arrs)\r\n          // console.log(this.getIndex)\r\n          this.arrs[this.getIndex].personnelid = res.data.body.personnel.id\r\n          this.arrs[this.getIndex].personnelName = res.data.body.personnel.name\r\n          this.arrs[this.getIndex].idCard = res.data.body.personnel.idCard\r\n          this.arrs[this.getIndex].sex = res.data.body.personnel.sex\r\n          this.arrs[this.getIndex].birthday = res.data.body.personnel.birthday\r\n          this.arrs[this.getIndex].maritalStatus = res.data.body.personnel.maritalStatus\r\n          this.arrs[this.getIndex].nativePlace = res.data.body.personnel.nativePlace\r\n          this.arrs[this.getIndex].educationBackground = res.data.body.personnel.educationBackground\r\n          this.arrs[this.getIndex].politicsStatus = res.data.body.personnel.politicsStatus\r\n          // this.arrs[this.getIndex].officeName = res.data.body.officeName // 工作单位\r\n          this.arrs[this.getIndex].officeName = res.data.body.personnel.office.name\r\n          this.arrs[this.getIndex].phone = res.data.body.personnel.phone\r\n          this.arrs[this.getIndex].nation = res.data.body.personnel.nation\r\n          this.arrs[this.getIndex].workingState = res.data.body.personnel.workingState\r\n          this.arrs[this.getIndex].presentOccupation = res.data.body.personnel.presentOccupation\r\n          this.arrs[this.getIndex].jobLevel = res.data.body.personnel.jobLevel\r\n          this.arrs[this.getIndex].personalResume = res.data.body.personnel.personalResume\r\n          this.arrs[this.getIndex].isCityCommissionPartyMember = res.data.body.personnel.isCityCommissionPartyMember\r\n          this.arrs[this.getIndex].isCPPCCMemberOrNot = res.data.body.personnel.isCPPCCMemberOrNot\r\n          this.arrs[this.getIndex].isCommunistPartyMember = res.data.body.personnel.isCommunistPartyMember\r\n          this.arrs[this.getIndex].isNPCDEputiesOrNot = res.data.body.personnel.isNPCDEputiesOrNot\r\n          this.arrs[this.getIndex].isPartyRepresentativeOrNot = res.data.body.personnel.isPartyRepresentativeOrNot\r\n\r\n          that.workingStateList.map(function(list){\r\n            // console.log(that.arrs)\r\n            if(list.value == res.data.body.personnel.workingState){ \r\n              that.arrs[that.getIndex].workingState = list.label\r\n            }\r\n          })\r\n          this.personnelpops1 = false\r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n    },\r\n    // 查询弹窗单选按钮事件\r\n    singleElection (row) {\r\n      this.templateSelection = this.tableData.indexOf(row);\r\n      this.templateRadio = row.id;\r\n      // console.log(this.templateSelection)\r\n      // console.log(this.templateRadio)\r\n    },\r\n    // 页面跳转 查询弹窗新增\r\n    goLink(e) {\r\n      this.$router.push({path: e,});\r\n    },\r\n    //跳转更新进度页面\r\n    updateProgress(formName){\r\n      if(!this.$route.query.ifupdata){\r\n        let that = this\r\n        this.personnelpops = false\r\n        this.$refs[formName].validate((valid) => {\r\n          if(valid){\r\n            // for(let i=0;i<that.arrs.length;i++){\r\n              // let sixArr = that.arrs[i]\r\n              // that.arrs[i].violationOfPartyDiscipline = that.arrs[i].violationOfPartyDiscipline.join(',')\r\n              // that.arrs[i].transferredResult = that.arrs[i].transferredResult != \"\" ? that.arrs[i].transferredResult.join(',') : \"\"\r\n            // }\r\n            let forminfo = {\r\n              type: this.$route.query.type ? this.$route.query.type : this.systemtype,\r\n              outOfficeName: that.system.outOfficeName,\r\n              id: that.itemid, //id\r\n              reflectName: that.find.reflectName,//反映人姓名\r\n              \"reflectunit.id\": typeof(that.find.reflectunitname) == 'string' ? that.find.reflectunitid : that.find.reflectunitname[that.find.reflectunitname.length-1],//反映人单位id\r\n              reflectPresenToCcupation: that.find.reflectPresenToCcupation,//反映人职务\r\n              reflectPhone: that.find.reflectPhone,//反映人联系方式\r\n              clueStoTheSource: that.msgform.clueStoTheSource,//线索来源\r\n              letterNumber: that.msgform.letterNumber,//来件编号\r\n              groupNumber: that.msgform.groupNumber,//组内线索编号\r\n              clueNumber: that.msgform.clueNumber,//线索件数\r\n              content: that.msgform.content,//反映的主要问题\r\n              isDuplicateOrNot: that.msgform.isDuplicateOrNot,//来件编号\r\n              \"office.id\": typeof(that.personnelOfficeName) == 'string' ? that.personnelOfficeId : that.personnelOfficeName[that.personnelOfficeName.length-1],\r\n              officePersonnelList: JSON.stringify(this.arrs),\r\n              userId: JSON.parse(localStorage.getItem('userinfo')).isd,\r\n              problemClueDisposalRecords: JSON.stringify(that.disposition),\r\n              remark1: that.remarksform.remark1,\r\n              remark2: that.remarksform.remark2,\r\n            }\r\n            this.$ajax({\r\n              method: \"POST\",\r\n              url: that.globals.requesturl + 'web/cluesparameter/save',\r\n              data: forminfo,\r\n              headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n              transformRequest: [function (data) { \r\n                return qs.stringify(data)\r\n              }]\r\n            }).then(res=>{\r\n              if(res.data.errorCode == \"-1\"){\r\n                this.$message.success(res.data.msg); \r\n                let ifupdata = this.$route.query.ifupdata\r\n                this.$router.push({path: '/updateprogress',query: {id:this.itemid,ifupdata:ifupdata,cluesParameterChildrenId:this.delId}})\r\n              }else{\r\n                this.$message.error(res.data.msg); \r\n              }\r\n            })\r\n          }else{\r\n            return false;\r\n          }\r\n        })\r\n      }else{\r\n        let ifupdata = this.$route.query.ifupdata\r\n        this.$router.push({path: '/updateprogress',query: {id:this.itemid,ifupdata:ifupdata,cluesParameterChildrenId:this.delId}})\r\n      }\r\n    },\r\n    // 系统内部单位添加人员\r\n    addPeopleBtn(){\r\n      this.ele +=1;\r\n      console.log(this.ele)\r\n      if(this.ele >= 1){\r\n        var isadd = {\r\n          islength: 0,\r\n          ismore: true, //展开-收起\r\n          radiobtn: false, //姓名前面的单选按钮\r\n          id: \"\",\r\n          disponsalWay: \"\",//处置方式（为判断走到哪一步，不需要显示）\r\n          //被反应人信息\r\n          personnelid:\"\",//被反映人id\r\n          personnelName:\"\",//姓名\r\n          idCard:\"\",//身份证\r\n          sex: \"\",//性别\r\n          birthday:\"\",//出生年月\r\n          maritalStatus:\"\",//婚姻状况\r\n          nativePlace:\"\",//籍贯\r\n          educationBackground:\"\",//文化程度\r\n          politicsStatus:\"\",//政治面貌\r\n          officeName:\"\",//工作单位\r\n          phone:\"\",//联系方式\r\n          nation:\"\",//民族\r\n          workingState:\"\",//在职情况\r\n          presentOccupation:\"\",//职务\r\n          jobLevel:\"\",//职级\r\n          isCommitteeMember:\"\",//市委\r\n          // isCommunistPartyMember:\"\",//市委\r\n          isCityCommissionPartyMembericipal:\"\",//市纪委\r\n          isCPPCCMemberOrNot:\"\",//是否政协委员\r\n          isNPCDEputiesOrNot:\"\",//是否人大代表\r\n          isPartyRepresentativeOrNot:\"\",//是否党代表\r\n          personalResume:\"\",//工作简历\r\n          //处置理由\r\n          disposalOfReason: \"\",//处置理由\r\n          proposedDisposition: \"\",//拟处置方式\r\n          thereWillBeTime: \"\",//上会时间\r\n          savedispose:\"\", //保存时候传的处置方式\r\n          //违纪违法内容\r\n          violationOfPartyDiscipline:\"\",//六大纪律\r\n          isDeregulation:\"\",//八项规定\r\n          isFourWindsProblem:\"\",//四风问题\r\n          // corruption:\"\",//腐败\r\n          isEighteenthAfter:\"\",//十八大问题\r\n          isPovertyAlleviationProblem:\"\",//扶贫\r\n          isAntitriadPutting:\"\",//涉黑\r\n          isCorruptionLivelihoodSector: \"\",//是否民生领域腐败\r\n          // 办理情况\r\n          istransferred:\"\",//是否办结\r\n          // transferredResultname:\"\",//办理结果\r\n          // transferredResultid:\"\",//办理结果\r\n          transferredResult:\"\",\r\n          transferredTime:\"\",//办结时间\r\n          accountabilityMeans:\"\",//问责方式\r\n          isHoldDemocraticMeetings:\"\",//是否召开民主生活会\r\n          holdDemocraticMeetingsTime:\"\",//召开民主生活会时间\r\n          // execute:\"\",//处分是否执行到位\r\n          isArchive:\"\",//是否归档\r\n          isPunishmentExecution:\"\",\r\n          accountabilityFor: \"\",//问责事由\r\n          //备注\r\n          // remark1:\"\",\r\n          // remark2:\"\",\r\n          // 处置\r\n          disposition:[],\r\n        }\r\n      }\r\n      this.arrs.push(isadd)\r\n    },\r\n    // 点击展开收起\r\n    findShowBtn(item,index){\r\n      console.log(index)\r\n      // let datarrs = this.arrs\r\n      // let aIsmore = item.ismore == true ? true:false \r\n      item.ismore = !item.ismore\r\n      // this.arrs = datarrs\r\n      // this.$set(this.arrs, index, {ismore: aIsmore});\r\n    },\r\n    // 点击姓名前面的单选按钮\r\n    checkedRaido(index){\r\n      console.log(index)\r\n      // console.log(this.arrs)\r\n      // let datarrs = this.arrs\r\n      // console.log(datarrs)\r\n      this.arrs.map(function(list){\r\n        list.radiobtn = false\r\n      })\r\n      this.arrs[index].radiobtn = true\r\n      let personnelid = this.arrs[index].personnelid\r\n      this.delId = this.arrs[index].id\r\n      // console.log(personnelid)\r\n      // console.log(this.delId)\r\n      // this.arrs = datarrs\r\n      // console.log(this.arrs)\r\n      // this.$set(this.arrs, index, {radiobtn: true}); //实时刷新\r\n    },\r\n    // 垃圾桶按钮\r\n    delBtn(index){\r\n      // console.log(index)\r\n      console.log(this.delId)\r\n      let that = this\r\n      let objs = {\r\n        id: that.delId\r\n      }\r\n      this.$ajax({\r\n        method:\"POST\",\r\n        url: that.globals.requesturl + 'web/cluesparameter/deletePersonnel',\r\n        data: objs,\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n        transformRequest: [function (data) { \r\n          return qs.stringify(data)\r\n        }]\r\n      }).then(res=>{\r\n        if(res.data.success && res.data.errorCode == '-1'){\r\n          console.log(res.data)\r\n          this.$message.success(res.data.msg); \r\n        }else{\r\n          this.$message.error(res.data.msg); \r\n        }\r\n      })\r\n      // this.arrs.splice(index,1)\r\n    },\r\n    //返回上一页\r\n    goback() {\r\n      this.$router.go(-1);\r\n    },\r\n  },\r\n  watch: {}\r\n};\r\n",null]}