{"remainingRequest":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\thread-loader\\dist\\cjs.js!D:\\我的项目\\纪检项目\\byqc\\node_modules\\babel-loader\\lib\\index.js!D:\\我的项目\\纪检项目\\byqc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\我的项目\\纪检项目\\byqc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\我的项目\\纪检项目\\byqc\\src\\views\\ImportJobAdd\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\我的项目\\纪检项目\\byqc\\src\\views\\ImportJobAdd\\index.vue","mtime":1577270124848},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我的项目\\纪检项目\\byqc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"D:\\\\\\u6211\\u7684\\u9879\\u76EE\\\\\\u7EAA\\u68C0\\u9879\\u76EE\\\\byqc\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\n\nvar _name$props$data$crea;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport qs from 'qs';\nimport Breadcrumb from \"@/components/Breadcrumb\";\nexport default (_name$props$data$crea = {\n  name: \"ImportJobAdd\",\n  props: {},\n  data: function data() {\n    return {\n      unitslist: [],\n      pickerOptions: \"\",\n      formInline: {\n        time: \"\",\n        underwriterId: \"\",\n        desc: \"\"\n      },\n      tableData: [],\n      page: 0,\n      //第几页\n      pagesize: 20,\n      //每页显示条数\n      //表格高度\n      tableHeight: \"28vh\"\n    };\n  },\n  created: function created() {\n    document.title = \"重点工作录入\";\n  },\n  computed: {}\n}, _defineProperty(_name$props$data$crea, \"created\", function created() {}), _defineProperty(_name$props$data$crea, \"mounted\", function mounted() {\n  var objs = {\n    userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n    pageNo: this.page,\n    pageSize: this.pagesize\n  };\n  this.init(objs);\n  this.initunits();\n}), _defineProperty(_name$props$data$crea, \"methods\", {\n  //滚动加载\n  onscroll: function onscroll() {\n    console.log(\"pppp\");\n  },\n  //下标初始化\n  infoindex: function infoindex(value) {\n    return value + 1 > 9 ? value + 1 : '0' + (value + 1);\n  },\n  // 表格样式的处理\n  cellStyle: function cellStyle(_ref) {\n    var row = _ref.row,\n        column = _ref.column,\n        rowIndex = _ref.rowIndex,\n        columnIndex = _ref.columnIndex;\n\n    //基数偶数延时不同\n    if (rowIndex % 2 != 0) {\n      return {\n        \"background-color\": \"#2162A8\",\n        \"text-align\": \"center\",\n        color: \"#fff\",\n        \"font-weight\": \"normal\",\n        padding: \"5px 0\"\n      };\n    } else {\n      return {\n        \"background-color\": \"#02468F\",\n        \"text-align\": \"center\",\n        color: \"#fff\",\n        \"font-weight\": \"normal\",\n        padding: \"5px 0\"\n      };\n    }\n  },\n  headerCellStyle: function headerCellStyle(_ref2) {\n    var row = _ref2.row,\n        rowIndex = _ref2.rowIndex;\n    return {\n      \"background-color\": \"#027DBC\",\n      \"text-align\": \"center\",\n      color: \"#fff\",\n      \"font-weight\": \"normal\",\n      \"font-size\": \"16px\"\n    };\n  },\n  //导出\n  exportbtn: function exportbtn() {\n    var _this = this;\n\n    var that = this,\n        ids = [];\n\n    if (that.tableData.length == 0) {\n      this.$message.error(\"暂无数据\");\n    } else {\n      that.tableData.map(function (list) {\n        ids.push(list.id);\n      });\n      var obbjstr = {\n        ids: ids.join(),\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + 'web/keyworkprogress/export',\n        data: obbjstr,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          var url = res.data.body.path;\n          var link = document.createElement('a');\n          link.style.display = 'none';\n          link.href = url;\n          link.setAttribute('download', '人员台账表');\n          document.body.appendChild(link);\n          link.click();\n\n          _this.$message.success(res.data.msg);\n        } else {\n          _this.$message.error(res.data.msg);\n        }\n      });\n    }\n  },\n  // 初始化\n  init: function init(objs) {\n    var _this2 = this;\n\n    var that = this;\n    this.$ajax({\n      method: \"POST\",\n      url: that.globals.requesturl + 'web/keyworkprogress/list',\n      data: objs,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == -1) {\n        var listarr = [];\n        res.data.body.keyWorkProgressList.map(function (list) {\n          listarr.push({\n            date: list.createDate,\n            office: list.office,\n            description: list.description,\n            jobSchedule: list.jobSchedule,\n            id: list.id\n          });\n        });\n        that.tableData = listarr;\n      } else {\n        _this2.$message.error(res.data.msg);\n      }\n    });\n  },\n  //保存进度\n  subBtnSave: function subBtnSave() {\n    var _this3 = this;\n\n    var that = this;\n    console.log(that.formInline);\n\n    if (that.formInline.underwriterId == \"\") {\n      this.$message.error(\"请选择承担单位\");\n    } else if (that.formInline.time == \"\") {\n      this.$message.error(\"请选择开始时间和结束时间\");\n    } else if (that.formInline.desc == \"\") {\n      this.$message.error(\"请填写问题描述\");\n    } else {\n      var objs = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n        'underWriter.id': that.formInline.underwriterId[that.formInline.underwriterId.length - 1],\n        startTime: that.formInline.time[0],\n        endTime: that.formInline.time[1],\n        description: that.formInline.desc,\n        id: \"\"\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + 'web/keyworkprogress/save',\n        data: objs,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          var _objs = {\n            userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n            pageNo: _this3.page,\n            pageSize: _this3.pagesize\n          };\n\n          _this3.init(_objs);\n\n          _this3.formInline = {\n            time: \"\",\n            underwriterId: \"\",\n            desc: \"\"\n          }, _this3.$message.success(res.data.msg);\n        } else {\n          _this3.$message.error(res.data.msg);\n        }\n      });\n    }\n  },\n  // 查询单位\n  initunits: function initunits() {\n    var _this4 = this;\n\n    var that = this;\n    var objs = {\n      userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd\n    };\n    this.$ajax({\n      method: \"POST\",\n      url: that.globals.requesturl + \"web/office/list\",\n      data: objs,\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.errorCode == \"-1\") {\n        var lists = [];\n        that.unitslist = res.data.body.officeList.map(function (list, index) {\n          return {\n            id: list.id,\n            name: list.name,\n            children: []\n          };\n        });\n      } else {\n        _this4.$message.error(res.data.msg);\n      }\n    });\n  },\n  //级联事件\n  unitChanges: function unitChanges(data) {\n    var _this5 = this;\n\n    var that = this;\n    var objs = {\n      userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd,\n      parentId: data[data.length - 1]\n    };\n    this.$ajax({\n      method: \"POST\",\n      url: that.globals.requesturl + \"web/office/getChildren\",\n      data: objs,\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.errorCode == \"-1\") {\n        if (data.length == 1) {\n          that.unitslist.map(function (list, index) {\n            if (list.id == data[0]) {\n              if (!list.children.length) {\n                list.children = res.data.body.officeList.map(function (list, index) {\n                  return {\n                    id: list.id,\n                    name: list.name,\n                    children: list.hasChildren == false ? \"\" : []\n                  };\n                });\n              }\n            }\n          });\n        } else if (data.length == 2) {\n          that.unitslist.map(function (list, index) {\n            if (list.id == data[0]) {\n              list.children.map(function (list, index) {\n                if (list.id == data[1]) {\n                  if (!list.children.length) {\n                    list.children = res.data.body.officeList.map(function (list, index) {\n                      return {\n                        id: list.id,\n                        name: list.name,\n                        children: list.hasChildren == false ? \"\" : []\n                      };\n                    });\n                  }\n                }\n              });\n            }\n          });\n        }\n      } else {\n        _this5.$message.error(res.data.msg);\n      }\n    });\n  },\n  //返回上一页\n  goback: function goback() {\n    this.$router.go(-1);\n  }\n}), _defineProperty(_name$props$data$crea, \"watch\", {}), _name$props$data$crea);",null]}