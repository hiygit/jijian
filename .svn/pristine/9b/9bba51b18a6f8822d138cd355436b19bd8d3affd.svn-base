{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\src\\views\\StandingBook\\script.js?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\src\\views\\StandingBook\\script.js","mtime":1579229222822},{"path":"C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\byqc\\byqc1\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport Navbar from '@/components/Navbar/index.vue';\nimport qs from 'qs';\nexport default {\n  name: 'StandingBook',\n  components: {\n    Navbar: Navbar\n  },\n  data: function data() {\n    return {\n      centerDialogVisible: false,\n      //点击头像 显示个人信息\n      unittitles: \"\",\n      //单位详情标题   updatas=1\n      remarks: \"\",\n      //单位详情介绍\n      headpic: \"\",\n      messages: \"\",\n      //初始化信息\n      info: true,\n      //初始化\n      isfullscreen: false,\n      //是否全屏显示\n      ifshowpop: false,\n      //是否显示弹框\n      companydata: [],\n      //搜索\n      formInline: {\n        keywords: \"\",\n        user: \"\"\n      },\n      ifnounits: false,\n      //是否显示人员信息\n      iscol1: false,\n      iscol2: false,\n      iscol3: false,\n      iscol4: false,\n      issearch: false,\n      //是否显示根据关键字和名字查询人员信息\n      issearchlist1: false,\n      issearchlist2: false,\n      //单位\n      units: [],\n      //部门\n      section: [],\n      //人员\n      staff: [],\n      //人员类别项\n      humanitem: [],\n      exportids: \"\",\n      //\n      peopleid: \"\",\n      //跳转人员详情id\n      // allunits:\"\",//单位数量\n      officeCount: \"\",\n      //直属单位数量\n      orgCount: \"\",\n      //内设机构数量\n      // ===========================================\n      // exportids: \"\",\n      redpicimg: \"\",\n      //给后台传值\n      redimg: \"\",\n      //不带域名的图片路径\n      showinput: true,\n      //工作单位查看时显示\n      disabled: false,\n      exportbtn: false,\n      //导出按钮\n      labelWidth: \"105px\",\n      form: {\n        redBottomPhoto: \"\",\n        //图片\n        name: \"\",\n        //姓名\n        sex: \"\",\n        //性别\n        nation: \"\",\n        //民族\n        nativePlace: \"\",\n        //籍贯\n        birthday: \"\",\n        //生日\n        idCard: \"\",\n        //身份证号\n        politicsStatus: \"\",\n        //政治面貌\n        educationBackground: \"\",\n        //学历\n        maritalStatus: \"\",\n        //婚姻状况\n        partyTime: \"\",\n        //入党时间\n        workTime: \"\",\n        //工作时间\n        companyName: \"\",\n        companyNameid: \"\",\n        \"office.name\": \"\",\n        //工作单位id\n        workingState: \"\",\n        //在职情况  新增\n        presentOccupation: \"\",\n        //现任职务\n        jobLevel: \"\",\n        //职务级别\n        incumbentTime: \"\",\n        //现任职务时间\n        personnelcategory: \"\",\n        //人员类型\n        titleJobs: \"\",\n        //职称\n        titleJobsLevel: \"\",\n        //职称级别\n        isCPPCCMemberOrNot: \"\",\n        //是否是政协委员\n        isNPCDEputiesOrNot: \"\",\n        //是否人大代表\n        isPartyRepresentativeOrNot: \"\",\n        //是否党代表\n        // ===========新增两个是否===========\n        isCommunistPartyMember: \"\",\n        //是否市委委员\n        isCityCommissionPartyMember: \"\",\n        //是否市纪委委员\n        // ==================================\n        presentAddress: \"\",\n        //现住址\n        phone: \"\",\n        //联系电话\n        personalResume: \"\",\n        //个人工作简历\n        rewardsAndPunishment: \"\",\n        //奖惩情况\n        otherrelevantinformation: \"\" //其他相关情况\n\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: \"请填写姓名\",\n          trigger: \"blur\"\n        }],\n        companyName: [{\n          required: true,\n          message: \"请选择单位名称\",\n          trigger: \"blur\"\n        }],\n        presentOccupation: [{\n          required: true,\n          message: \"请填写现任职务\",\n          trigger: \"blur\"\n        }]\n      },\n      //家庭成员\n      familyMembers: [{\n        appellation: \"\",\n        //称谓\n        name: \"\",\n        //姓名\n        politicsStatus: \"\",\n        //政治面貌\n        presentOccupation: \"\",\n        //现任职务\n        companyName: \"\",\n        //工作单位\n        age: \"\",\n        //年龄\n        id: \"\"\n      }],\n      //个人及配偶、共同生活的子女拥有的房产情况\n      housingSituations: [{\n        serialNumber: \"\",\n        roomNumber: \"\",\n        coveredArea: \"\",\n        purchasingDate: \"\",\n        purchasePrice: \"\",\n        propertyOwner: \"\",\n        location: \"\",\n        id: \"\"\n      }],\n      showinputcompanyName: true,\n      //表格高度\n      tableHeight: \"50vh\",\n      sexlist: [],\n      //性别数组\n      politicallist: [],\n      //政治面貌数组\n      degreelist: [],\n      //学历数组\n      marriagelist: [],\n      //婚姻数组\n      dutyRankList: [],\n      //职务级别\n      Personneltype: [],\n      //人员类型\n      isif: [],\n      //是否选择下拉框\n      unitslist: [],\n      //级联选择\n      zhichengjibie: [],\n      //职称级别\n      workingStateList: [],\n      //在职情况 新增\n      // 民族\n      nationalities: [\"汉族\", \"蒙古族\", \"回族\", \"藏族\", \"维吾尔族\", \"苗族\", \"彝族\", \"壮族\", \"布依族\", \"朝鲜族\", \"满族\", \"侗族\", \"瑶族\", \"白族\", \"土家族\", \"哈尼族\", \"哈萨克族\", \"傣族\", \"黎族\", \"傈僳族\", \"佤族\", \"畲族\", \"高山族\", \"拉祜族\", \"水族\", \"东乡族\", \"纳西族\", \"景颇族\", \"柯尔克孜族\", \"土族\", \"达斡尔族\", \"仫佬族\", \"羌族\", \"布朗族\", \"撒拉族\", \"毛南族\", \"仡佬族\", \"锡伯族\", \"阿昌族\", \"普米族\", \"塔吉克族\", \"怒族\", \"乌孜别克族\", \"俄罗斯族\", \"鄂温克族\", \"德昂族\", \"保安族\", \"裕固族\", \"京族\", \"塔塔尔族\", \"独龙族\", \"鄂伦春族\", \"赫哲族\", \"门巴族\", \"珞巴族\", \"基诺族\"]\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    document.title = \"人员台账\";\n    var that = this; //在职情况 新增\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + 'web/dict',\n      data: {\n        type: 'working_state'\n      },\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == '-1') {\n        that.workingStateList = res.data.body.dictValueList;\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    }); //性别\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"sex\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        res.data.body.dictValueList.map(function (list) {\n          that.sexlist.push({\n            value: list.value,\n            label: list.label\n          });\n        });\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    }); //政治面貌\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"politics_status\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        res.data.body.dictValueList.map(function (list) {\n          that.politicallist.push({\n            value: list.value,\n            label: list.label\n          });\n        });\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    }); //学历\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"education_background\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        res.data.body.dictValueList.map(function (list) {\n          that.degreelist.push({\n            value: list.value,\n            label: list.label\n          });\n        });\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    }); //婚姻\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"marital_status\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        res.data.body.dictValueList.map(function (list) {\n          that.marriagelist.push({\n            value: list.value,\n            label: list.label\n          });\n        });\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    }); //职务级别\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"job_level\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        res.data.body.dictValueList.map(function (list) {\n          that.dutyRankList.push({\n            value: list.value,\n            label: list.label\n          });\n        });\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    }); //人员类型\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"personne_icategory\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        res.data.body.dictValueList.map(function (list) {\n          that.Personneltype.push({\n            value: list.value,\n            label: list.label\n          });\n        });\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    }); //是否是政协委员\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"yes_no\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        res.data.body.dictValueList.map(function (list) {\n          that.isif.push({\n            value: list.value,\n            label: list.label\n          });\n        });\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    }); //职称级别\n\n    this.$ajax({\n      method: \"POST\",\n      url: this.globals.requesturl + \"web/dict\",\n      data: {\n        type: \"title_jobs_level\"\n      },\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      transformRequest: [function (data) {\n        return qs.stringify(data);\n      }]\n    }).then(function (res) {\n      if (res.data.success && res.data.errorCode == \"-1\") {\n        res.data.body.dictValueList.map(function (list) {\n          that.zhichengjibie.push({\n            value: list.value,\n            label: list.label\n          });\n        });\n      } else {\n        _this.$message.error(res.data.msg);\n      }\n    });\n  },\n  mounted: function mounted() {\n    this.init();\n    this.leftunit();\n    var allnum = {\n      officeId: \"\"\n    };\n    this.allunitsfun(allnum);\n  },\n  methods: {\n    //查看人员详情\n    detailspeople: function detailspeople() {\n      var _this2 = this;\n\n      // this.$router.push({path:\"/addInfo\",query:{updatas:1,id:this.peopleid}})\n      this.centerDialogVisible = true;\n      var objs = {\n        userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd,\n        id: this.peopleid\n      };\n      var that = this;\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + \"web/personnel/form\",\n        data: objs,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          that.redpicimg = res.data.body.personnel.redBottomPhoto;\n          that.form = {\n            redBottomPhoto: that.globals.requesturl + res.data.body.personnel.redBottomPhoto,\n            name: res.data.body.personnel.name,\n            sex: res.data.body.personnel.sex,\n            nativePlace: res.data.body.personnel.nativePlace,\n            educationBackground: res.data.body.personnel.educationBackground,\n            nation: res.data.body.personnel.nation,\n            maritalStatus: res.data.body.personnel.maritalStatus,\n            birthday: res.data.body.personnel.birthday,\n            idCard: res.data.body.personnel.idCard,\n            politicsStatus: res.data.body.personnel.politicsStatus,\n            partyTime: res.data.body.personnel.partyTime,\n            workTime: res.data.body.personnel.workTime,\n            companyName: res.data.body.personnel.office ? res.data.body.personnel.office.name : \"\",\n            companyNameid: res.data.body.personnel.office ? res.data.body.personnel.office.id : \"\",\n            presentOccupation: res.data.body.personnel.presentOccupation,\n            jobLevel: res.data.body.personnel.jobLevel,\n            incumbentTime: res.data.body.personnel.incumbentTime,\n            personnelcategory: res.data.body.personnel.personnelcategory,\n            titleJobs: res.data.body.personnel.titleJobs,\n            titleJobsLevel: res.data.body.personnel.titleJobsLevel,\n            isCPPCCMemberOrNot: res.data.body.personnel.isCPPCCMemberOrNot,\n            isNPCDEputiesOrNot: res.data.body.personnel.isNPCDEputiesOrNot,\n            isPartyRepresentativeOrNot: res.data.body.personnel.isPartyRepresentativeOrNot,\n            // ================================================================================\n            isCommunistPartyMember: res.data.body.personnel.isCommunistPartyMember,\n            //是否市委委员\n            isCityCommissionPartyMember: res.data.body.personnel.isCityCommissionPartyMember,\n            //是否市纪委委员\n            workingState: res.data.body.personnel.workingState,\n            //在职情况\n            // ================================================================================\n            presentAddress: res.data.body.personnel.presentAddress,\n            phone: res.data.body.personnel.phone,\n            personalResume: res.data.body.personnel.personalResume,\n            rewardsAndPunishment: res.data.body.personnel.rewardsAndPunishment,\n            otherrelevantinformation: res.data.body.personnel.otherrelevantinformation,\n            id: res.data.body.personnel.id\n          };\n\n          if (res.data.body.familyMembers.length > 0) {\n            var familyarr = [];\n            res.data.body.familyMembers.map(function (list) {\n              familyarr.push({\n                id: list.id,\n                appellation: list.appellation,\n                name: list.name,\n                politicsStatus: list.politicsStatus,\n                presentOccupation: list.presentOccupation,\n                age: list.age,\n                companyName: list.officeName\n              });\n            });\n            that.familyMembers = familyarr;\n          }\n\n          if (res.data.body.housingSituations.length > 0) {\n            var housingSituations = [];\n            res.data.body.housingSituations.map(function (list) {\n              housingSituations.push({\n                id: list.id,\n                roomNumber: list.roomNumber,\n                coveredArea: list.coveredArea,\n                purchasingDate: list.purchasingDate,\n                purchasePrice: list.purchasePrice,\n                propertyOwner: list.propertyOwner,\n                location: list.location\n              });\n            });\n            that.housingSituations = housingSituations;\n          }\n        } else {\n          _this2.$message.error(res.data.msg);\n        }\n      });\n    },\n    //初始化\n    init: function init() {\n      var _this3 = this;\n\n      var that = this;\n      var objs = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n        officeId: \"\"\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + 'web/personnel/index',\n        data: objs,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          that.messages = res.data.msg;\n        } else {\n          _this3.$message.error(res.data.msg);\n        }\n      });\n    },\n    //获取左边单位\n    leftunit: function leftunit() {\n      var _this4 = this;\n\n      var that = this;\n      var objs = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: this.globals.requesturl + 'web/office/list',\n        data: objs,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          res.data.body.officeList.map(function (list) {\n            list.checkedstate = false;\n          });\n          that.companydata = res.data.body.officeList;\n        } else {\n          _this4.$message.error(res.data.msg);\n        }\n      });\n    },\n    // 选择单位\n    selectitem: function selectitem(dex) {\n      var _this5 = this;\n\n      this.companydata.map(function (list) {\n        list.checkedstate = false;\n      });\n      this.companydata[dex].checkedstate = true;\n      this.info = false;\n      this.ifnounits = true;\n      this.iscol1 = true;\n      this.iscol2 = false;\n      this.iscol3 = false;\n      this.iscol4 = false;\n      this.issearch = false;\n      this.issearchlist1 = false;\n      this.issearchlist2 = false;\n      var requestobj = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n        officeId: this.companydata[dex].id\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: this.globals.requesturl + 'web/personnel/index',\n        data: requestobj,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          res.data.body.offices.map(function (list) {\n            list.checkedstate = false;\n          });\n          _this5.units = res.data.body.offices;\n        } else {\n          _this5.$message.error(res.data.msg);\n        }\n      });\n      var allnum = {\n        officeId: this.companydata[dex].id\n      };\n      this.allunitsfun(allnum);\n    },\n    //机关\n    selunits: function selunits(dex) {\n      var _this6 = this;\n\n      this.units.map(function (list) {\n        list.checkedstate = false;\n      });\n      this.units[dex].checkedstate = true;\n\n      if (this.units[dex].hasChildren) {\n        this.iscol2 = true;\n        this.iscol3 = false;\n      } else {\n        this.iscol2 = false;\n        this.iscol3 = true;\n      }\n\n      this.iscol4 = false;\n      var requestobj = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n        officeId: this.units[dex].id\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: this.globals.requesturl + 'web/personnel/index',\n        data: requestobj,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          if (_this6.units[dex].hasChildren) {\n            res.data.body.offices.map(function (list) {\n              list.checkedstate = false;\n            });\n            _this6.section = res.data.body.offices;\n          } else {\n            res.data.body.personnels.map(function (list) {\n              list.checkedstate = false;\n            });\n            _this6.staff = res.data.body.personnels;\n          }\n        } else {\n          _this6.$message.error(res.data.msg);\n        }\n      });\n    },\n    //部门\n    selsection: function selsection(dex) {\n      var _this7 = this;\n\n      this.section.map(function (list) {\n        list.checkedstate = false;\n      });\n      this.section[dex].checkedstate = true;\n      this.iscol3 = true;\n      this.iscol4 = false;\n      var requestobj = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n        officeId: this.section[dex].id\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: this.globals.requesturl + 'web/personnel/index',\n        data: requestobj,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          if (_this7.section[dex].hasChildren) {// res.data.body.offices.map(function(list){\n            //   list.checkedstate = false\n            // })\n            // this.section = res.data.body.offices\n          } else {\n            res.data.body.personnels.map(function (list) {\n              list.checkedstate = false;\n            });\n            _this7.staff = res.data.body.personnels;\n          }\n        } else {\n          _this7.$message.error(res.data.msg);\n        }\n      });\n    },\n    //人员\n    selstaff: function selstaff(dex, items) {\n      this.peopleid = items.id;\n      this.searchprople(items.id);\n      this.staff.map(function (list) {\n        list.checkedstate = false;\n      });\n      this.headpic = this.globals.requesturl + items.redBottomPhoto;\n      this.staff[dex].checkedstate = true;\n      this.iscol4 = true;\n    },\n    //长按事件\n    showDeleteButton: function showDeleteButton(id) {\n      var _this8 = this;\n\n      var that = this;\n      var querstobj = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n        id: id\n      };\n      this.$ajax({\n        method: \"POST\",\n        data: querstobj,\n        url: this.globals.requesturl + 'web/office/getRemarks',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.success && res.data.errorCode == -1) {\n          console.log(res.data);\n          that.unittitles = res.data.body.title; // let str = res.data.body.remarks.replace(/\\n/g,\"<br/>\")\n\n          that.remarks = res.data.body.content.replace(/\\n/g, \"<br/>\");\n        } else {\n          _this8.$message.error(res.data.msg);\n        }\n      });\n      this.ifshowpop = true;\n    },\n    // 页面跳转\n    // goLink(e){\n    //   this.$router.push({path:e})\n    // },\n    //关闭弹框\n    closepop: function closepop() {\n      this.ifshowpop = false;\n      this.isfullscreen = false;\n    },\n    //查询按钮\n    searchbtn: function searchbtn() {\n      var _this9 = this;\n\n      var querstobj = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n        keyword: this.formInline.keywords,\n        name: this.formInline.user\n      };\n      this.$ajax({\n        method: \"POST\",\n        data: querstobj,\n        url: this.globals.requesturl + 'web/personnel/solrSelect',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.success && res.data.errorCode == -1) {\n          var listarr = [];\n\n          for (var i = 0; i < res.data.body.list.length; i++) {\n            if (res.data.body.list[i].personnelList.length > 0) {\n              for (var j = 0; j < res.data.body.list[i].personnelList.length; j++) {\n                var list = res.data.body.list[i].personnelList[j];\n                console.log(list);\n                listarr.push({\n                  checkedstate: false,\n                  names: list.name,\n                  offics: list.office.name,\n                  headimg: _this9.globals.requesturl + list.redBottomPhoto,\n                  id: list.id\n                });\n              }\n            } else {\n              _this9.$message.error('暂无相关人员');\n            }\n          }\n\n          _this9.staff = listarr;\n        } else {\n          _this9.$message.error(res.data.msg);\n        }\n      });\n      this.info = false;\n      this.issearch = true;\n      this.ifnounits = false;\n      this.iscol1 = false;\n      this.iscol2 = false;\n      this.iscol3 = false;\n      this.iscol4 = false;\n      this.issearchlist1 = true;\n      this.issearchlist2 = false;\n    },\n    // 根据关键字和名字查询人员信息点击\n    searchprople: function searchprople(id) {\n      var _this10 = this;\n\n      var that = this;\n      that.exportids = id;\n      var objpeople = {\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd,\n        personnelId: id\n      };\n      this.$ajax({\n        method: \"POST\",\n        data: objpeople,\n        url: that.globals.requesturl + 'web/personnel/indexPersonnel',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.success && res.data.errorCode == -1) {\n          var arrlist = [];\n          res.data.body.list.map(function (list) {\n            switch (list.name) {\n              case '谈话情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/tanhua.png\"),\n                  selimg: require(\"@/assets/issue/tanhua1.png\")\n                });\n                break;\n\n              case '函询情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/hanxun.png\"),\n                  selimg: require(\"@/assets/issue/hanxun1.png\")\n                });\n                break;\n\n              case '谈话+函询情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/tanhan.png\"),\n                  selimg: require(\"@/assets/issue/tanhan1.png\")\n                });\n                break;\n\n              case '初核情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/chuhe.png\"),\n                  selimg: require(\"@/assets/issue/chuhe1.png\")\n                });\n                break;\n\n              case '暂存情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/zancun.png\"),\n                  selimg: require(\"@/assets/issue/zancun1.png\")\n                });\n                break;\n\n              case '拟立案情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/lian.png\"),\n                  selimg: require(\"@/assets/issue/lian1.png\")\n                });\n                break;\n\n              case '了结情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/lejie.png\"),\n                  selimg: require(\"@/assets/issue/lejie1.png\")\n                });\n                break;\n\n              case '转办情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/zhunaban.png\"),\n                  selimg: require(\"@/assets/issue/zhunaban1.png\")\n                });\n                break;\n\n              case '党纪处分情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/dangji.png\"),\n                  selimg: require(\"@/assets/issue/dangji1.png\")\n                });\n                break;\n\n              case '党组织党纪处分情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/dangzu.png\"),\n                  selimg: require(\"@/assets/issue/dangzu1.png\")\n                });\n                break;\n\n              case '批评教育情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/piping.png\"),\n                  selimg: require(\"@/assets/issue/piping1.png\")\n                });\n                break;\n\n              case '组织处理情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/zuzhi.png\"),\n                  selimg: require(\"@/assets/issue/zuzhi1.png\")\n                });\n                break;\n\n              case '政务处分情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/zhengwu.png\"),\n                  selimg: require(\"@/assets/issue/zhengwu1.png\")\n                });\n                break;\n\n              case '其他情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/qita.png\"),\n                  selimg: require(\"@/assets/issue/qita1.png\")\n                });\n                break;\n\n              case '问责情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/wenze.png\"),\n                  selimg: require(\"@/assets/issue/wenze1.png\")\n                });\n                break;\n\n              case '民主生活会情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/minzhu.png\"),\n                  selimg: require(\"@/assets/issue/minzhu1.png\")\n                });\n                break;\n\n              case '任职变动情况':\n                arrlist.push({\n                  title: list.name,\n                  num: list.number,\n                  imgs: require(\"@/assets/issue/renzhi.png\"),\n                  selimg: require(\"@/assets/issue/renzhi1.png\")\n                });\n                break;\n            }\n\n            that.humanitem = arrlist;\n          });\n        } else {\n          _this10.$message.error(res.data.msg);\n        }\n      });\n    },\n    searchresultsitem: function searchresultsitem(dex, item) {\n      this.peopleid = item.id;\n      this.searchprople(item.id);\n      this.staff.map(function (list) {\n        list.checkedstate = false;\n      });\n      this.headpic = item.headimg;\n      this.staff[dex].checkedstate = true;\n      this.issearchlist2 = true;\n    },\n    //导出人员信息\n    exportbtns: function exportbtns() {\n      var _this11 = this;\n\n      if (this.exportids == \"\") {\n        this.$message.error(\"请选择需要导出的人员\");\n      } else {\n        var obbjstr = {\n          ids: this.exportids,\n          userId: JSON.parse(localStorage.getItem('userinfo')).isd\n        };\n        this.$ajax({\n          method: \"POST\",\n          url: this.globals.requesturl + 'web/personnel/export',\n          data: obbjstr,\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          transformRequest: [function (data) {\n            return qs.stringify(data);\n          }]\n        }).then(function (res) {\n          if (res.data.errorCode == \"-1\") {\n            var url = res.data.body.path;\n            var link = document.createElement('a');\n            link.style.display = 'none';\n            link.href = url;\n            link.setAttribute('download', '人员台账表');\n            document.body.appendChild(link);\n            link.click();\n\n            _this11.$message.success(res.data.msg);\n          } else {\n            _this11.$message.error(res.data.msg);\n          }\n        });\n      }\n    },\n    //获取单位数量\n    allunitsfun: function allunitsfun(obj) {\n      var that = this;\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + 'web/index/getChildOfficeNumber',\n        data: obj,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          // that.allunits = res.data.body.number\n          that.officeCount = res.data.body.officeCount;\n          that.orgCount = res.data.body.orgCount;\n        }\n      });\n    },\n    // ===================查询单位====================== \n    indexinfo: function indexinfo(value) {\n      return value + 1 > 9 ? value + 1 : \"0\" + (value + 1);\n    },\n    initunits: function initunits() {\n      var _this12 = this;\n\n      var that = this;\n      var objs = {\n        userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + \"web/office/list\",\n        data: objs,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          var lists = [];\n          that.unitslist = res.data.body.officeList.map(function (list, index) {\n            return {\n              id: list.id,\n              name: list.name,\n              children: []\n            };\n          });\n        } else {\n          _this12.$message.error(res.data.msg);\n        }\n      });\n    },\n    //级联事件\n    unitChanges: function unitChanges(data) {\n      var _this13 = this;\n\n      var that = this;\n      var objs = {\n        userId: JSON.parse(localStorage.getItem(\"userinfo\")).isd,\n        parentId: data[data.length - 1]\n      };\n      this.$ajax({\n        method: \"POST\",\n        url: that.globals.requesturl + \"web/office/getChildren\",\n        data: objs,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          that.showinputcompanyName = false;\n\n          if (data.length == 1) {\n            that.unitslist.map(function (list, index) {\n              if (list.id == data[0]) {\n                if (!list.children.length) {\n                  list.children = res.data.body.officeList.map(function (list, index) {\n                    return {\n                      id: list.id,\n                      name: list.name,\n                      children: list.hasChildren == false ? \"\" : []\n                    };\n                  });\n                }\n              }\n            });\n          } else if (data.length == 2) {\n            that.unitslist.map(function (list, index) {\n              if (list.id == data[0]) {\n                list.children.map(function (list, index) {\n                  if (list.id == data[1]) {\n                    if (!list.children.length) {\n                      list.children = res.data.body.officeList.map(function (list, index) {\n                        return {\n                          id: list.id,\n                          name: list.name,\n                          children: list.hasChildren == false ? \"\" : []\n                        };\n                      });\n                    }\n                  }\n                });\n              }\n            });\n          }\n        } else {\n          _this13.$message.error(res.data.msg);\n        }\n      });\n    },\n    // 表格样式的处理\n    cellStyle: function cellStyle(_ref) {\n      var row = _ref.row,\n          column = _ref.column,\n          rowIndex = _ref.rowIndex,\n          columnIndex = _ref.columnIndex;\n\n      //基数偶数延时不同\n      if (rowIndex % 2 != 0) {\n        return {\n          \"background-color\": \"#2162A8\",\n          \"text-align\": \"center\",\n          color: \"#fff\",\n          \"font-weight\": \"normal\",\n          padding: \"5px 0\",\n          height: \"60px\"\n        };\n      } else {\n        return {\n          \"background-color\": \"#02468F\",\n          \"text-align\": \"center\",\n          color: \"#fff\",\n          \"font-weight\": \"normal\",\n          height: \"60px\",\n          padding: \"5px 0\"\n        };\n      }\n    },\n    headerCellStyle: function headerCellStyle(_ref2) {\n      var row = _ref2.row,\n          rowIndex = _ref2.rowIndex;\n      return {\n        \"background-color\": \"#027DBC\",\n        \"text-align\": \"center\",\n        color: \"#fff\",\n        \"font-weight\": \"normal\",\n        height: \"60px\",\n        \"font-size\": \"16px\"\n      };\n    },\n    //查看个人信息导出\n    personlExportbtns: function personlExportbtns() {\n      var _this14 = this;\n\n      var obbjstr = {\n        ids: this.peopleid,\n        userId: JSON.parse(localStorage.getItem('userinfo')).isd\n      };\n      console.log(obbjstr);\n      this.$ajax({\n        method: \"POST\",\n        url: this.globals.requesturl + 'web/personnel/export',\n        data: obbjstr,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        transformRequest: [function (data) {\n          return qs.stringify(data);\n        }]\n      }).then(function (res) {\n        if (res.data.errorCode == \"-1\") {\n          console.log(res.data);\n          var url = res.data.body.path;\n          var link = document.createElement('a');\n          link.style.display = 'none';\n          link.href = url;\n          link.setAttribute('download', '人员台账表');\n          document.body.appendChild(link);\n          link.click();\n\n          _this14.$message.success(res.data.msg);\n        } else {\n          _this14.$message.error(res.data.msg);\n        }\n      });\n    }\n  },\n  watch: {\n    companydata: {\n      handler: function handler(newVal, oldVal) {\n        var _this15 = this;\n\n        this.checkedall = true;\n        this.companydata.map(function (item) {\n          if (!item.checkedstate) {\n            _this15.checkedall = false;\n          }\n        });\n      },\n      deep: true\n    }\n  }\n};",null]}